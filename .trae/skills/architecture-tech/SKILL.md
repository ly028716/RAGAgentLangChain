---
name: "architecture-tech"
description: "制定系统架构与技术方案。需要技术选型、接口/数据模型设计、性能与安全方案时调用。"
---

# 架构/技术方案 Skill

## 目标

- 将需求落地为可实现、可演进的技术方案
- 统一架构边界与层次，降低跨模块耦合

## 协作约束

- 除非用户明确要求，不额外生成文档
- 不随意删除既有文档和代码（除非用户要求）

## 适用场景（触发条件）

- 新模块/新能力上线前的方案设计
- 需要API契约、数据模型、依赖关系、扩展点
- 性能/安全/可观测性需要系统性设计

## 项目架构约束（优先遵循）

- 后端建议遵循分层：API(路由) → Service(业务) → Repository(数据访问) → Core/Models(基础设施)
- 前端建议遵循分层：View(页面) → Store(状态) → API(请求) → Types(契约)
- 关键外部依赖：MySQL、Redis、Chroma、DashScope(通义千问/Embedding)

## 输出模板（技术设计）

```markdown
# <方案标题>

## 1. 背景与目标
- 目标：
- 非目标：

## 2. 现状与问题
- 现状：
- 痛点：

## 3. 方案概览
- 组件/模块：
- 数据流/调用链：
- 关键决策：

## 4. 接口与契约
- API列表（含鉴权/分页/错误码）：
- DTO/Schema变更：
- 兼容策略（新增字段、版本化）：

## 5. 数据模型
- 表结构/索引/约束：
- 迁移策略：
- 缓存键设计（如适用）：

## 6. 安全与权限
- 认证/授权：
- 速率限制：
- 敏感信息处理：

## 7. 性能与可用性
- 关键路径：
- 降级与超时策略：
- 资源与容量预估：

## 8. 可观测性
- 日志与追踪：
- 指标与告警：

## 9. 风险与回滚
- 风险：
- 回滚与灰度：
```

## 评审检查清单

- 需求边界清晰，非目标明确
- 接口契约可测试、可演进（新增兼容优先）
- 数据一致性策略明确（事务/幂等/重试）
- 安全项有明确方案（鉴权、输入校验、限流）
- 观测项可落地（关键指标、错误日志、追踪维度）
