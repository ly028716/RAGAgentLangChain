---
name: "product-req"
description: "分析与编写PRD/用户故事/验收标准。用户提出新功能、变更需求、优先级或验收口径不清时调用。"
---

# 产品/需求 Skill

## 目标

- 将模糊想法转成可开发、可测试、可验收的需求
- 明确范围边界、优先级、依赖与风险

## 适用场景（触发条件）

- 新功能/需求变更评估与拆解
- 需要PRD、用户故事、验收标准、范围边界
- 需要统一口径：前后端/测试/UI/运维对齐

## 产出物（默认不额外生成文档）

- 需求摘要（1页以内）
- 用户故事 + 验收标准（Given/When/Then）
- 关键流程（主流程/异常流程/权限与配额相关规则）
- 非功能需求（性能/安全/可观测性/兼容性）

## 协作约束

- 除非用户明确要求，不额外生成文档
- 不随意删除既有文档和代码（除非用户要求）

## 项目上下文速记

- 后端：FastAPI + SQLAlchemy + LangChain（见 backend/app）
- 前端：Vue 3 + TypeScript + Element Plus + Pinia（见 frontend/src）
- 核心域：认证授权、对话、知识库RAG、Agent执行、配额、监控指标

## 工作方式

1. 用“用户目标 → 场景 → 任务 → 约束”结构复述需求
2. 明确范围边界：必须做/可选做/不做
3. 拆用户故事并补齐验收标准与异常分支
4. 指定关键数据与接口契约（字段、状态机、分页、鉴权）
5. 给出优先级与风险清单

## PRD模板（可直接复用）

```markdown
# <功能名称>

## 1. 背景与目标
- 背景：
- 目标（可量化）：

## 2. 范围与边界
- Must：
- Should：
- Could：
- Won't：

## 3. 用户故事与验收标准
### US-1 <标题>
作为 <角色>，我想要 <能力>，以便 <价值>。

验收标准：
- Given <前置> When <动作> Then <结果>
- Given <前置> When <异常> Then <提示/恢复>

## 4. 流程
- 主流程：
- 异常流程：

## 5. 数据与权限
- 数据对象/字段：
- 权限与配额规则：

## 6. 非功能需求
- 性能：
- 安全：
- 可观测性：
- 兼容性：

## 7. 风险与依赖
- 风险：
- 依赖：
```
