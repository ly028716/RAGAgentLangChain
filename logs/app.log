2026-01-19 21:00:39 - root - INFO - [logger.py:113] - setup_logging() - ================================================================================
2026-01-19 21:00:39 - root - INFO - [logger.py:114] - setup_logging() - 日志系统初始化完成
2026-01-19 21:00:39 - root - INFO - [logger.py:115] - setup_logging() - 日志级别: INFO
2026-01-19 21:00:39 - root - INFO - [logger.py:116] - setup_logging() - 日志文件: ./logs/app.log
2026-01-19 21:00:39 - root - INFO - [logger.py:117] - setup_logging() - 日志文件最大大小: 10.00MB
2026-01-19 21:00:39 - root - INFO - [logger.py:118] - setup_logging() - 日志备份数量: 10
2026-01-19 21:00:39 - root - INFO - [logger.py:119] - setup_logging() - ================================================================================
2026-01-19 21:00:39 - app.middleware.error_handler - INFO - [error_handler.py:255] - register_exception_handlers() - 异常处理器已注册
2026-01-19 21:00:39 - app.middleware.rate_limiter - INFO - [rate_limiter.py:176] - register_rate_limiter() - 速率限制器已注册 - 登录: 5/min, API: 100/min, LLM: 20/min
2026-01-19 21:00:40 - app.middleware.error_handler - INFO - [error_handler.py:255] - register_exception_handlers() - 异常处理器已注册
2026-01-19 21:00:46 - app.core.llm - INFO - [llm.py:101] - _create_llm() - 创建通义千问LLM实例: model=qwen-turbo, temperature=0.3, max_tokens=50, streaming=False
2026-01-19 21:00:48 - app.services.conversation_service - INFO - [conversation_service.py:634] - generate_title_sync() - 生成对话标题: Python简介
2026-01-19 21:00:48 - app.services.conversation_service - INFO - [conversation_service.py:634] - generate_title_sync() - 生成对话标题: 学习机器学习入门
2026-01-19 21:00:49 - app.services.conversation_service - INFO - [conversation_service.py:634] - generate_title_sync() - 生成对话标题: FastAPI构建RESTful API
2026-01-19 21:00:50 - app.services.conversation_service - INFO - [conversation_service.py:634] - generate_title_sync() - 生成对话标题: 冒泡排序代码
2026-01-19 21:01:02 - app.middleware.error_handler - ERROR - [error_handler.py:125] - app_exception_handler() - AppException: 1004 - 用户不存在 [request_id=None, path=/test/app-exception]
2026-01-19 21:01:02 - app.middleware.error_handler - WARNING - [error_handler.py:194] - validation_exception_handler() - ValidationError: 1 validation errors [request_id=None, path=/test/validation-error]
2026-01-19 21:01:02 - app.middleware.error_handler - ERROR - [error_handler.py:225] - general_exception_handler() - Unhandled Exception: ValueError - 这是一个未捕获的异常 [request_id=None, path=/test/general-exception]
Traceback:
Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\test_error_handler.py", line 41, in test_general_exception
    raise ValueError("这是一个未捕获的异常")
ValueError: 这是一个未捕获的异常

2026-01-19 21:01:02 - root - INFO - [logger.py:113] - setup_logging() - ================================================================================
2026-01-19 21:01:02 - root - INFO - [logger.py:114] - setup_logging() - 日志系统初始化完成
2026-01-19 21:01:02 - root - INFO - [logger.py:115] - setup_logging() - 日志级别: INFO
2026-01-19 21:01:02 - root - INFO - [logger.py:116] - setup_logging() - 日志文件: ./logs/app.log
2026-01-19 21:01:02 - root - INFO - [logger.py:117] - setup_logging() - 日志文件最大大小: 10.00MB
2026-01-19 21:01:02 - root - INFO - [logger.py:118] - setup_logging() - 日志备份数量: 10
2026-01-19 21:01:02 - root - INFO - [logger.py:119] - setup_logging() - ================================================================================
2026-01-19 21:01:02 - test_logger - INFO - [test_logger.py:36] - test_basic_logging() - 这是一条INFO级别的日志
2026-01-19 21:01:02 - test_logger - WARNING - [test_logger.py:37] - test_basic_logging() - 这是一条WARNING级别的日志
2026-01-19 21:01:02 - test_logger - ERROR - [test_logger.py:38] - test_basic_logging() - 这是一条ERROR级别的日志
2026-01-19 21:01:02 - test_logger - CRITICAL - [test_logger.py:39] - test_basic_logging() - 这是一条CRITICAL级别的日志
2026-01-19 21:01:02 - app.services.auth_service - INFO - [test_logger.py:55] - test_module_logger() - 认证服务的INFO日志
2026-01-19 21:01:02 - sqlalchemy.engine - WARNING - [test_logger.py:58] - test_module_logger() - 数据库的WARNING日志
2026-01-19 21:01:02 - sqlalchemy.engine - WARNING - [test_logger.py:77] - test_third_party_loggers() - SQLAlchemy WARNING日志
2026-01-19 21:01:02 - httpx - WARNING - [test_logger.py:80] - test_third_party_loggers() - HTTPX WARNING日志
2026-01-19 21:01:02 - test_logger - INFO - [test_logger.py:95] - test_log_file() - 测试日志消息 #1
2026-01-19 21:01:02 - test_logger - INFO - [test_logger.py:95] - test_log_file() - 测试日志消息 #2
2026-01-19 21:01:02 - test_logger - INFO - [test_logger.py:95] - test_log_file() - 测试日志消息 #3
2026-01-19 21:01:02 - test_logger - INFO - [test_logger.py:95] - test_log_file() - 测试日志消息 #4
2026-01-19 21:01:02 - test_logger - INFO - [test_logger.py:95] - test_log_file() - 测试日志消息 #5
2026-01-19 21:01:02 - test.module.name - INFO - [test_logger.py:124] - test_log_formatting() - 简单消息
2026-01-19 21:01:02 - test.module.name - INFO - [test_logger.py:125] - test_log_formatting() - 带参数的消息: 字符串, 123
2026-01-19 21:01:02 - test.module.name - INFO - [test_logger.py:126] - test_log_formatting() - 使用f-string的消息: 测试
2026-01-19 21:01:02 - test.module.name - ERROR - [test_logger.py:132] - test_log_formatting() - 捕获到异常
Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\test_logger.py", line 130, in test_log_formatting
    result = 1 / 0
             ~~^~~
ZeroDivisionError: division by zero
2026-01-19 21:01:02 - test_logger - INFO - [test_logger.py:150] - test_log_rotation() - 日志轮转配置已验证
2026-01-19 21:01:02 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #1
2026-01-19 21:01:02 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #2
2026-01-19 21:01:02 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #3
2026-01-19 21:01:02 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #4
2026-01-19 21:01:02 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #5
2026-01-19 21:01:02 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #6
2026-01-19 21:01:02 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #7
2026-01-19 21:01:02 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #8
2026-01-19 21:01:02 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #9
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #10
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #11
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #12
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #13
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #14
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #15
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #16
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #17
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #18
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #19
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #20
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #21
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #22
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #23
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #24
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #25
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #26
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #27
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #28
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #29
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #30
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #31
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #32
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #33
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #34
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #35
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #36
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #37
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #38
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #39
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #40
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #41
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #42
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #43
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #44
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #45
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #46
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #47
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #48
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #49
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #50
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #51
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #52
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #53
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #54
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #55
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #56
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #57
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #58
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #59
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #60
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #61
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #62
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #63
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #64
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #65
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #66
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #67
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #68
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #69
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #70
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #71
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #72
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #73
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #74
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #75
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #76
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #77
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #78
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #79
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #80
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #81
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #82
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #83
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #84
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #85
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #86
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #87
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #88
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #89
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #90
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #91
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #92
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #93
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #94
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #95
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #96
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #97
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #98
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #99
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #100
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #101
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #102
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #103
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #104
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #105
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #106
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #107
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #108
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #109
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #110
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #111
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #112
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #113
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #114
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #115
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #116
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #117
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #118
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #119
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #120
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #121
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #122
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #123
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #124
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #125
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #126
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #127
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #128
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #129
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #130
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #131
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #132
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #133
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #134
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #135
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #136
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #137
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #138
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #139
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #140
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #141
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #142
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #143
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #144
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #145
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #146
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #147
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #148
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #149
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #150
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #151
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #152
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #153
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #154
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #155
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #156
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #157
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #158
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #159
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #160
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #161
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #162
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #163
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #164
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #165
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #166
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #167
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #168
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #169
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #170
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #171
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #172
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #173
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #174
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #175
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #176
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #177
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #178
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #179
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #180
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #181
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #182
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #183
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #184
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #185
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #186
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #187
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #188
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #189
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #190
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #191
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #192
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #193
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #194
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #195
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #196
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #197
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #198
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #199
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #200
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #201
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #202
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #203
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #204
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #205
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #206
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #207
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #208
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #209
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #210
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #211
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #212
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #213
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #214
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #215
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #216
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #217
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #218
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #219
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #220
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #221
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #222
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #223
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #224
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #225
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #226
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #227
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #228
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #229
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #230
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #231
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #232
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #233
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #234
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #235
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #236
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #237
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #238
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #239
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #240
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #241
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #242
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #243
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #244
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #245
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #246
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #247
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #248
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #249
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #250
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #251
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #252
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #253
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #254
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #255
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #256
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #257
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #258
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #259
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #260
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #261
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #262
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #263
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #264
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #265
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #266
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #267
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #268
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #269
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #270
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #271
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #272
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #273
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #274
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #275
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #276
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #277
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #278
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #279
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #280
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #281
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #282
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #283
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #284
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #285
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #286
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #287
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #288
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #289
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #290
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #291
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #292
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #293
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #294
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #295
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #296
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #297
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #298
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #299
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #300
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #301
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #302
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #303
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #304
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #305
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #306
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #307
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #308
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #309
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #310
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #311
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #312
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #313
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #314
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #315
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #316
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #317
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #318
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #319
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #320
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #321
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #322
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #323
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #324
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #325
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #326
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #327
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #328
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #329
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #330
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #331
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #332
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #333
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #334
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #335
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #336
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #337
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #338
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #339
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #340
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #341
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #342
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #343
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #344
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #345
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #346
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #347
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #348
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #349
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #350
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #351
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #352
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #353
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #354
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #355
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #356
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #357
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #358
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #359
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #360
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #361
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #362
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #363
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #364
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #365
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #366
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #367
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #368
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #369
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #370
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #371
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #372
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #373
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #374
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #375
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #376
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #377
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #378
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #379
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #380
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #381
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #382
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #383
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #384
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #385
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #386
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #387
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #388
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #389
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #390
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #391
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #392
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #393
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #394
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #395
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #396
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #397
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #398
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #399
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #400
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #401
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #402
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #403
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #404
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #405
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #406
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #407
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #408
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #409
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #410
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #411
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #412
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #413
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #414
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #415
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #416
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #417
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #418
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #419
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #420
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #421
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #422
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #423
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #424
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #425
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #426
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #427
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #428
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #429
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #430
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #431
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #432
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #433
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #434
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #435
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #436
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #437
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #438
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #439
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #440
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #441
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #442
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #443
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #444
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #445
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #446
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #447
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #448
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #449
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #450
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #451
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #452
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #453
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #454
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #455
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #456
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #457
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #458
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #459
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #460
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #461
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #462
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #463
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #464
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #465
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #466
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #467
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #468
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #469
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #470
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #471
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #472
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #473
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #474
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #475
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #476
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #477
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #478
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #479
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #480
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #481
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #482
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #483
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #484
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #485
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #486
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #487
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #488
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #489
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #490
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #491
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #492
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #493
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #494
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #495
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #496
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #497
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #498
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #499
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #500
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #501
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #502
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #503
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #504
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #505
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #506
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #507
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #508
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #509
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #510
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #511
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #512
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #513
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #514
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #515
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #516
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #517
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #518
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #519
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #520
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #521
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #522
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #523
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #524
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #525
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #526
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #527
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #528
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #529
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #530
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #531
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #532
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #533
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #534
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #535
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #536
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #537
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #538
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #539
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #540
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #541
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #542
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #543
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #544
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #545
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #546
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #547
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #548
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #549
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #550
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #551
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #552
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #553
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #554
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #555
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #556
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #557
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #558
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #559
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #560
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #561
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #562
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #563
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #564
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #565
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #566
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #567
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #568
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #569
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #570
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #571
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #572
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #573
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #574
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #575
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #576
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #577
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #578
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #579
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #580
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #581
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #582
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #583
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #584
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #585
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #586
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #587
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #588
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #589
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #590
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #591
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #592
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #593
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #594
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #595
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #596
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #597
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #598
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #599
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #600
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #601
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #602
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #603
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #604
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #605
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #606
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #607
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #608
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #609
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #610
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #611
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #612
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #613
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #614
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #615
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #616
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #617
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #618
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #619
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #620
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #621
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #622
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #623
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #624
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #625
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #626
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #627
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #628
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #629
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #630
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #631
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #632
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #633
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #634
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #635
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #636
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #637
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #638
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #639
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #640
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #641
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #642
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #643
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #644
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #645
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #646
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #647
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #648
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #649
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #650
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #651
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #652
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #653
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #654
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #655
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #656
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #657
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #658
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #659
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #660
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #661
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #662
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #663
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #664
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #665
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #666
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #667
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #668
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #669
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #670
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #671
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #672
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #673
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #674
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #675
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #676
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #677
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #678
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #679
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #680
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #681
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #682
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #683
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #684
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #685
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #686
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #687
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #688
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #689
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #690
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #691
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #692
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #693
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #694
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #695
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #696
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #697
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #698
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #699
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #700
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #701
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #702
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #703
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #704
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #705
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #706
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #707
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #708
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #709
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #710
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #711
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #712
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #713
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #714
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #715
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #716
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #717
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #718
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #719
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #720
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #721
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #722
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #723
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #724
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #725
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #726
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #727
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #728
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #729
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #730
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #731
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #732
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #733
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #734
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #735
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #736
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #737
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #738
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #739
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #740
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #741
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #742
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #743
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #744
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #745
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #746
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #747
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #748
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #749
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #750
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #751
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #752
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #753
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #754
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #755
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #756
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #757
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #758
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #759
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #760
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #761
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #762
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #763
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #764
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #765
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #766
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #767
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #768
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #769
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #770
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #771
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #772
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #773
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #774
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #775
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #776
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #777
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #778
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #779
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #780
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #781
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #782
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #783
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #784
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #785
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #786
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #787
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #788
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #789
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #790
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #791
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #792
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #793
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #794
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #795
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #796
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #797
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #798
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #799
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #800
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #801
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #802
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #803
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #804
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #805
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #806
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #807
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #808
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #809
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #810
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #811
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #812
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #813
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #814
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #815
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #816
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #817
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #818
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #819
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #820
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #821
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #822
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #823
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #824
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #825
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #826
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #827
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #828
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #829
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #830
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #831
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #832
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #833
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #834
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #835
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #836
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #837
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #838
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #839
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #840
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #841
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #842
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #843
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #844
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #845
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #846
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #847
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #848
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #849
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #850
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #851
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #852
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #853
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #854
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #855
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #856
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #857
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #858
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #859
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #860
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #861
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #862
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #863
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #864
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #865
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #866
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #867
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #868
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #869
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #870
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #871
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #872
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #873
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #874
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #875
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #876
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #877
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #878
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #879
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #880
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #881
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #882
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #883
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #884
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #885
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #886
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #887
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #888
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #889
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #890
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #891
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #892
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #893
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #894
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #895
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #896
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #897
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #898
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #899
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #900
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #901
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #902
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #903
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #904
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #905
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #906
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #907
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #908
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #909
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #910
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #911
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #912
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #913
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #914
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #915
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #916
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #917
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #918
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #919
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #920
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #921
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #922
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #923
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #924
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #925
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #926
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #927
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #928
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #929
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #930
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #931
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #932
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #933
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #934
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #935
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #936
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #937
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #938
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #939
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #940
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #941
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #942
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #943
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #944
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #945
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #946
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #947
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #948
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #949
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #950
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #951
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #952
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #953
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #954
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #955
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #956
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #957
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #958
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #959
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #960
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #961
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #962
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #963
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #964
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #965
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #966
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #967
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #968
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #969
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #970
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #971
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #972
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #973
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #974
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #975
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #976
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #977
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #978
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #979
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #980
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #981
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #982
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #983
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #984
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #985
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #986
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #987
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #988
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #989
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #990
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #991
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #992
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #993
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #994
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #995
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #996
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #997
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #998
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #999
2026-01-19 21:01:03 - test_logger - INFO - [test_logger.py:167] - test_performance() - 性能测试日志 #1000
2026-01-19 21:01:07 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: GET /metrics [request_id=e48af4aa-3b6d-4a65-a50e-796977fc05d7]
2026-01-19 21:01:07 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: GET /metrics [request_id=e48af4aa-3b6d-4a65-a50e-796977fc05d7, status=200]
2026-01-19 21:01:07 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: GET / [request_id=39bdf915-f58f-4353-b94c-a7b82f745654]
2026-01-19 21:01:07 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: GET / [request_id=39bdf915-f58f-4353-b94c-a7b82f745654, status=200]
2026-01-19 21:01:07 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: GET /health [request_id=a54875cc-cca3-4bc3-b243-4b751bbf6a58]
2026-01-19 21:01:07 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: GET /health [request_id=a54875cc-cca3-4bc3-b243-4b751bbf6a58, status=200]
2026-01-19 21:01:07 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: GET /scheduler/jobs [request_id=f275ddd8-a9a5-4b4d-8478-adb296dfa2ba]
2026-01-19 21:01:07 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: GET /scheduler/jobs [request_id=f275ddd8-a9a5-4b4d-8478-adb296dfa2ba, status=200]
2026-01-19 21:01:07 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: GET /metrics [request_id=f1d21c69-367b-46bd-82ad-a318ecf97032]
2026-01-19 21:01:07 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: GET /metrics [request_id=f1d21c69-367b-46bd-82ad-a318ecf97032, status=200]
2026-01-19 21:01:07 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: GET /metrics [request_id=6b58a386-95c8-438b-ae3f-aafc208db5e7]
2026-01-19 21:01:07 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: GET /metrics [request_id=6b58a386-95c8-438b-ae3f-aafc208db5e7, status=200]
2026-01-19 21:01:07 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: GET /metrics [request_id=d7fff7d7-78c0-4250-a1ea-ad52f686eb86]
2026-01-19 21:01:07 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: GET /metrics [request_id=d7fff7d7-78c0-4250-a1ea-ad52f686eb86, status=200]
2026-01-19 21:01:07 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: GET /metrics [request_id=5362b89e-e9c8-4b11-898e-dbe612c5de08]
2026-01-19 21:01:07 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: GET /metrics [request_id=5362b89e-e9c8-4b11-898e-dbe612c5de08, status=200]
2026-01-19 21:01:07 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: GET /metrics [request_id=16c88f95-f8a8-4c88-844f-f79f9c0ca55a]
2026-01-19 21:01:07 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: GET /metrics [request_id=16c88f95-f8a8-4c88-844f-f79f9c0ca55a, status=200]
2026-01-19 21:01:07 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: GET /metrics [request_id=7847af1c-2049-45ca-9b5f-ada21ff6ed70]
2026-01-19 21:01:07 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: GET /metrics [request_id=7847af1c-2049-45ca-9b5f-ada21ff6ed70, status=200]
2026-01-19 21:01:07 - app.middleware.rate_limiter - INFO - [rate_limiter.py:176] - register_rate_limiter() - 速率限制器已注册 - 登录: 5/min, API: 100/min, LLM: 20/min
2026-01-19 21:01:07 - app.middleware.rate_limiter - INFO - [rate_limiter.py:176] - register_rate_limiter() - 速率限制器已注册 - 登录: 5/min, API: 100/min, LLM: 20/min
2026-01-19 21:01:16 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: GET /test [request_id=5f08f791-ad6c-4409-b0dc-d59e9f44d352]
2026-01-19 21:01:16 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: GET /test [request_id=5f08f791-ad6c-4409-b0dc-d59e9f44d352, status=200]
2026-01-19 21:01:16 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: GET /test [request_id=custom-test-id-12345]
2026-01-19 21:01:16 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: GET /test [request_id=custom-test-id-12345, status=200]
2026-01-19 21:01:16 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: GET /test [request_id=b2c25201-64a6-4cf1-9c69-fac17610fc53]
2026-01-19 21:01:16 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: GET /test [request_id=b2c25201-64a6-4cf1-9c69-fac17610fc53, status=200]
2026-01-19 21:01:16 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: GET /test [request_id=f07fac18-4e3e-463a-ab01-2fbc712c215d]
2026-01-19 21:01:16 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: GET /test [request_id=f07fac18-4e3e-463a-ab01-2fbc712c215d, status=200]
2026-01-19 21:01:16 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: GET /test [request_id=e31e4cd9-cb64-4447-bfca-dd45c481d72a]
2026-01-19 21:01:16 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: GET /test [request_id=e31e4cd9-cb64-4447-bfca-dd45c481d72a, status=200]
2026-01-19 21:01:16 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: GET /test [request_id=54f27685-d188-41ea-ae61-23cfddfa9343]
2026-01-19 21:01:16 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: GET /test [request_id=54f27685-d188-41ea-ae61-23cfddfa9343, status=200]
2026-01-19 21:01:16 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: GET /test [request_id=02fb490e-9b71-48ee-bc93-d535d0b670c1]
2026-01-19 21:01:16 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: GET /test [request_id=02fb490e-9b71-48ee-bc93-d535d0b670c1, status=200]
2026-01-19 21:01:16 - app.middleware.request_id - INFO - [request_id.py:98] - register_request_id_middleware() - 请求ID中间件已注册
2026-01-19 21:01:16 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: GET /test [request_id=26c41c10-26d0-4cb2-8fff-aab8fc0fe1f4]
2026-01-19 21:01:16 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: GET /test [request_id=26c41c10-26d0-4cb2-8fff-aab8fc0fe1f4, status=200]
2026-01-19 21:01:16 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: GET /error [request_id=5b37c0c4-cb2b-4d4e-a348-ae215d666792]
2026-01-19 21:01:16 - app.middleware.request_id - ERROR - [request_id.py:82] - dispatch() - Request failed: GET /error [request_id=5b37c0c4-cb2b-4d4e-a348-ae215d666792] - ValueError: 测试错误
2026-01-19 21:01:16 - app.tasks.quota_tasks - INFO - [quota_tasks.py:59] - reset_monthly_quotas() - 开始执行月度配额重置任务
2026-01-19 21:01:20 - app.tasks.quota_tasks - ERROR - [quota_tasks.py:87] - reset_monthly_quotas() - 月度配额重置任务失败: (pymysql.err.OperationalError) (2003, "Can't connect to MySQL server on 'localhost' ([WinError 10061] 由于目标计算机积极拒绝，无法连接。)")
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 644, in connect
    sock = socket.create_connection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Administrator\AppData\Local\Programs\Python\Python311\Lib\socket.py", line 851, in create_connection
    raise exceptions[0]
  File "C:\Users\Administrator\AppData\Local\Programs\Python\Python311\Lib\socket.py", line 836, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 1269, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 716, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 169, in _do_get
    with util.safe_reraise():
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 167, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 393, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 678, in __init__
    self.__connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 902, in __connect
    with util.safe_reraise():
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 898, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\create.py", line 637, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 616, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 358, in __init__
    self.connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 711, in connect
    raise exc
pymysql.err.OperationalError: (2003, "Can't connect to MySQL server on 'localhost' ([WinError 10061] 由于目标计算机积极拒绝，无法连接。)")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\tasks\quota_tasks.py", line 68, in reset_monthly_quotas
    reset_count = quota_service.reset_all_quotas()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\services\quota_service.py", line 344, in reset_all_quotas
    count = self.quota_repo.reset_all_expired_quotas()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\repositories\quota_repository.py", line 227, in reset_all_expired_quotas
    quotas = self.get_quotas_to_reset(today)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\repositories\quota_repository.py", line 217, in get_quotas_to_reset
    return self.db.query(UserQuota).filter(UserQuota.reset_date <= reset_date).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2693, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2847, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 147, in __init__
    Connection._handle_dbapi_exception_noconnection(
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2430, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 1269, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 716, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 169, in _do_get
    with util.safe_reraise():
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 167, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 393, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 678, in __init__
    self.__connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 902, in __connect
    with util.safe_reraise():
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 898, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\create.py", line 637, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 616, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 358, in __init__
    self.connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 711, in connect
    raise exc
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2003, "Can't connect to MySQL server on 'localhost' ([WinError 10061] 由于目标计算机积极拒绝，无法连接。)")
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-19 21:01:20 - app.tasks.cleanup_tasks - INFO - [cleanup_tasks.py:71] - cleanup_old_login_attempts() - 开始清理 30 天前的登录尝试记录
2026-01-19 21:01:24 - app.tasks.cleanup_tasks - ERROR - [cleanup_tasks.py:107] - cleanup_old_login_attempts() - 登录记录清理任务失败: (pymysql.err.OperationalError) (2003, "Can't connect to MySQL server on 'localhost' ([WinError 10061] 由于目标计算机积极拒绝，无法连接。)")
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 644, in connect
    sock = socket.create_connection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Administrator\AppData\Local\Programs\Python\Python311\Lib\socket.py", line 851, in create_connection
    raise exceptions[0]
  File "C:\Users\Administrator\AppData\Local\Programs\Python\Python311\Lib\socket.py", line 836, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 1269, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 716, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 169, in _do_get
    with util.safe_reraise():
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 167, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 393, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 678, in __init__
    self.__connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 902, in __connect
    with util.safe_reraise():
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 898, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\create.py", line 637, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 616, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 358, in __init__
    self.connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 711, in connect
    raise exc
pymysql.err.OperationalError: (2003, "Can't connect to MySQL server on 'localhost' ([WinError 10061] 由于目标计算机积极拒绝，无法连接。)")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\tasks\cleanup_tasks.py", line 81, in cleanup_old_login_attempts
    result = db.execute(stmt)
             ^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 147, in __init__
    Connection._handle_dbapi_exception_noconnection(
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2430, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 1269, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 716, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 169, in _do_get
    with util.safe_reraise():
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 167, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 393, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 678, in __init__
    self.__connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 902, in __connect
    with util.safe_reraise():
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 898, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\create.py", line 637, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 616, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 358, in __init__
    self.connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 711, in connect
    raise exc
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2003, "Can't connect to MySQL server on 'localhost' ([WinError 10061] 由于目标计算机积极拒绝，无法连接。)")
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-19 21:01:24 - app.tasks.cleanup_tasks - INFO - [cleanup_tasks.py:182] - cleanup_temp_files() - 开始清理 7 天前的临时文件: ./data/uploads
2026-01-19 21:01:24 - app.tasks.cleanup_tasks - INFO - [cleanup_tasks.py:239] - cleanup_temp_files() - 临时文件清理任务完成: 删除了 0 个文件, 释放 0.00 MB, 截止日期 2026-01-12T13:01:24.340408, 耗时 0.00 秒
2026-01-19 21:01:24 - app.tasks.cleanup_tasks - INFO - [cleanup_tasks.py:300] - cleanup_old_api_usage() - 开始清理 90 天前的API使用记录
2026-01-19 21:01:28 - app.tasks.cleanup_tasks - ERROR - [cleanup_tasks.py:339] - cleanup_old_api_usage() - API使用记录清理任务失败: (pymysql.err.OperationalError) (2003, "Can't connect to MySQL server on 'localhost' ([WinError 10061] 由于目标计算机积极拒绝，无法连接。)")
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 644, in connect
    sock = socket.create_connection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Administrator\AppData\Local\Programs\Python\Python311\Lib\socket.py", line 851, in create_connection
    raise exceptions[0]
  File "C:\Users\Administrator\AppData\Local\Programs\Python\Python311\Lib\socket.py", line 836, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 1269, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 716, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 169, in _do_get
    with util.safe_reraise():
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 167, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 393, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 678, in __init__
    self.__connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 902, in __connect
    with util.safe_reraise():
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 898, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\create.py", line 637, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 616, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 358, in __init__
    self.connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 711, in connect
    raise exc
pymysql.err.OperationalError: (2003, "Can't connect to MySQL server on 'localhost' ([WinError 10061] 由于目标计算机积极拒绝，无法连接。)")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\tasks\cleanup_tasks.py", line 313, in cleanup_old_api_usage
    result = db.execute(stmt)
             ^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 147, in __init__
    Connection._handle_dbapi_exception_noconnection(
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2430, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 1269, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 716, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 169, in _do_get
    with util.safe_reraise():
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 167, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 393, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 678, in __init__
    self.__connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 902, in __connect
    with util.safe_reraise():
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 898, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\create.py", line 637, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 616, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 358, in __init__
    self.connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 711, in connect
    raise exc
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2003, "Can't connect to MySQL server on 'localhost' ([WinError 10061] 由于目标计算机积极拒绝，无法连接。)")
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-19 21:01:28 - app.tasks.cleanup_tasks - INFO - [cleanup_tasks.py:382] - run_all_cleanup_tasks() - 开始执行所有清理任务
2026-01-19 21:01:28 - app.tasks.cleanup_tasks - INFO - [cleanup_tasks.py:71] - cleanup_old_login_attempts() - 开始清理 30 天前的登录尝试记录
2026-01-19 21:01:32 - app.tasks.cleanup_tasks - ERROR - [cleanup_tasks.py:107] - cleanup_old_login_attempts() - 登录记录清理任务失败: (pymysql.err.OperationalError) (2003, "Can't connect to MySQL server on 'localhost' ([WinError 10061] 由于目标计算机积极拒绝，无法连接。)")
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 644, in connect
    sock = socket.create_connection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Administrator\AppData\Local\Programs\Python\Python311\Lib\socket.py", line 851, in create_connection
    raise exceptions[0]
  File "C:\Users\Administrator\AppData\Local\Programs\Python\Python311\Lib\socket.py", line 836, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 1269, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 716, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 169, in _do_get
    with util.safe_reraise():
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 167, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 393, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 678, in __init__
    self.__connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 902, in __connect
    with util.safe_reraise():
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 898, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\create.py", line 637, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 616, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 358, in __init__
    self.connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 711, in connect
    raise exc
pymysql.err.OperationalError: (2003, "Can't connect to MySQL server on 'localhost' ([WinError 10061] 由于目标计算机积极拒绝，无法连接。)")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\tasks\cleanup_tasks.py", line 81, in cleanup_old_login_attempts
    result = db.execute(stmt)
             ^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 147, in __init__
    Connection._handle_dbapi_exception_noconnection(
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2430, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 1269, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 716, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 169, in _do_get
    with util.safe_reraise():
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 167, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 393, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 678, in __init__
    self.__connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 902, in __connect
    with util.safe_reraise():
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 898, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\create.py", line 637, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 616, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 358, in __init__
    self.connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 711, in connect
    raise exc
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2003, "Can't connect to MySQL server on 'localhost' ([WinError 10061] 由于目标计算机积极拒绝，无法连接。)")
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-19 21:01:32 - app.tasks.cleanup_tasks - INFO - [cleanup_tasks.py:182] - cleanup_temp_files() - 开始清理 7 天前的临时文件: ./data/uploads
2026-01-19 21:01:32 - app.tasks.cleanup_tasks - INFO - [cleanup_tasks.py:239] - cleanup_temp_files() - 临时文件清理任务完成: 删除了 0 个文件, 释放 0.00 MB, 截止日期 2026-01-12T13:01:32.485951, 耗时 0.00 秒
2026-01-19 21:01:32 - app.tasks.cleanup_tasks - INFO - [cleanup_tasks.py:300] - cleanup_old_api_usage() - 开始清理 90 天前的API使用记录
2026-01-19 21:01:36 - app.tasks.cleanup_tasks - ERROR - [cleanup_tasks.py:339] - cleanup_old_api_usage() - API使用记录清理任务失败: (pymysql.err.OperationalError) (2003, "Can't connect to MySQL server on 'localhost' ([WinError 10061] 由于目标计算机积极拒绝，无法连接。)")
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 644, in connect
    sock = socket.create_connection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Administrator\AppData\Local\Programs\Python\Python311\Lib\socket.py", line 851, in create_connection
    raise exceptions[0]
  File "C:\Users\Administrator\AppData\Local\Programs\Python\Python311\Lib\socket.py", line 836, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 1269, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 716, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 169, in _do_get
    with util.safe_reraise():
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 167, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 393, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 678, in __init__
    self.__connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 902, in __connect
    with util.safe_reraise():
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 898, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\create.py", line 637, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 616, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 358, in __init__
    self.connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 711, in connect
    raise exc
pymysql.err.OperationalError: (2003, "Can't connect to MySQL server on 'localhost' ([WinError 10061] 由于目标计算机积极拒绝，无法连接。)")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\tasks\cleanup_tasks.py", line 313, in cleanup_old_api_usage
    result = db.execute(stmt)
             ^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 147, in __init__
    Connection._handle_dbapi_exception_noconnection(
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2430, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 1269, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 716, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 169, in _do_get
    with util.safe_reraise():
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 167, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 393, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 678, in __init__
    self.__connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 902, in __connect
    with util.safe_reraise():
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 898, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\create.py", line 637, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 616, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 358, in __init__
    self.connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 711, in connect
    raise exc
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2003, "Can't connect to MySQL server on 'localhost' ([WinError 10061] 由于目标计算机积极拒绝，无法连接。)")
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-19 21:01:36 - app.tasks.cleanup_tasks - INFO - [cleanup_tasks.py:469] - process_account_deletions() - 开始处理到期的账号删除请求
2026-01-19 21:01:40 - app.tasks.cleanup_tasks - ERROR - [cleanup_tasks.py:553] - process_account_deletions() - 账号删除任务失败: (pymysql.err.OperationalError) (2003, "Can't connect to MySQL server on 'localhost' ([WinError 10061] 由于目标计算机积极拒绝，无法连接。)")
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 644, in connect
    sock = socket.create_connection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Administrator\AppData\Local\Programs\Python\Python311\Lib\socket.py", line 851, in create_connection
    raise exceptions[0]
  File "C:\Users\Administrator\AppData\Local\Programs\Python\Python311\Lib\socket.py", line 836, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 1269, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 716, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 169, in _do_get
    with util.safe_reraise():
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 167, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 393, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 678, in __init__
    self.__connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 902, in __connect
    with util.safe_reraise():
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 898, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\create.py", line 637, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 616, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 358, in __init__
    self.connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 711, in connect
    raise exc
pymysql.err.OperationalError: (2003, "Can't connect to MySQL server on 'localhost' ([WinError 10061] 由于目标计算机积极拒绝，无法连接。)")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\tasks\cleanup_tasks.py", line 482, in process_account_deletions
    .all()
     ^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2693, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2847, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 147, in __init__
    Connection._handle_dbapi_exception_noconnection(
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2430, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 1269, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 716, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 169, in _do_get
    with util.safe_reraise():
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 167, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 393, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 678, in __init__
    self.__connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 902, in __connect
    with util.safe_reraise():
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\pool\base.py", line 898, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\create.py", line 637, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 616, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 358, in __init__
    self.connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\pymysql\connections.py", line 711, in connect
    raise exc
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2003, "Can't connect to MySQL server on 'localhost' ([WinError 10061] 由于目标计算机积极拒绝，无法连接。)")
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-19 21:01:40 - app.tasks.cleanup_tasks - INFO - [cleanup_tasks.py:433] - run_all_cleanup_tasks() - 所有清理任务完成: 1/4 成功, 耗时 12.27 秒
2026-01-19 21:01:40 - app.services.verification_service - INFO - [verification_service.py:247] - verify_code() - 验证码验证成功: test@example.com, 类型: register
2026-01-19 21:01:40 - app.services.verification_service - INFO - [verification_service.py:134] - send_email_code() - 验证码已发送到邮箱: test@example.com, 类型: register
2026-01-19 21:01:40 - app.services.verification_service - ERROR - [verification_service.py:144] - send_email_code() - 发送邮件失败: 发送失败
2026-01-19 21:01:40 - app.services.verification_service - INFO - [verification_service.py:323] - cleanup_expired_codes() - 清理了 5 条过期验证码
2026-01-19 21:01:41 - app.websocket.connection_manager - INFO - [connection_manager.py:46] - connect() - WebSocket连接已建立 user_id=1
2026-01-19 21:01:41 - app.websocket.connection_manager - INFO - [connection_manager.py:46] - connect() - WebSocket连接已建立 user_id=1
2026-01-19 21:01:41 - app.websocket.connection_manager - INFO - [connection_manager.py:75] - disconnect() - WebSocket连接已断开 user_id=1, 持续时间=0.00秒
2026-01-19 21:01:41 - app.websocket.connection_manager - INFO - [connection_manager.py:46] - connect() - WebSocket连接已建立 user_id=1
2026-01-19 21:01:41 - app.websocket.connection_manager - INFO - [connection_manager.py:46] - connect() - WebSocket连接已建立 user_id=1
2026-01-19 21:01:41 - app.websocket.connection_manager - INFO - [connection_manager.py:46] - connect() - WebSocket连接已建立 user_id=2
2026-01-19 21:01:41 - app.websocket.connection_manager - INFO - [connection_manager.py:46] - connect() - WebSocket连接已建立 user_id=3
2026-01-19 21:01:41 - app.websocket.connection_manager - INFO - [connection_manager.py:143] - broadcast() - 消息已广播给 2 个用户
2026-01-19 21:01:41 - app.websocket.connection_manager - INFO - [connection_manager.py:46] - connect() - WebSocket连接已建立 user_id=1
2026-01-19 21:01:41 - app.websocket.connection_manager - INFO - [connection_manager.py:46] - connect() - WebSocket连接已建立 user_id=1
2026-01-19 21:01:41 - app.websocket.connection_manager - INFO - [connection_manager.py:46] - connect() - WebSocket连接已建立 user_id=1
2026-01-19 21:01:41 - app.websocket.connection_manager - INFO - [connection_manager.py:46] - connect() - WebSocket连接已建立 user_id=999
2026-01-19 21:01:41 - app.websocket.connection_manager - INFO - [connection_manager.py:75] - disconnect() - WebSocket连接已断开 user_id=999, 持续时间=0.00秒
2026-01-19 21:01:41 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:01:41 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:01:41 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:01:41 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:01:41 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:01:45 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:01:45 - app.core.vector_store - INFO - [vector_store.py:78] - _ensure_directory_exists() - 创建向量数据库目录: ./data/chroma
2026-01-19 21:01:45 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:01:45 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:01:45 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:01:45 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:01:45 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:01:45 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:01:45 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:01:45 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:01:45 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:01:45 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:01:45 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:01:45 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:01:45 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:01:45 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:01:45 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:01:45 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:01:45 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/auth/login [request_id=aaf0ec1b-6448-4545-91dc-0548ef33cb15]
2026-01-19 21:01:49 - app.middleware.request_id - ERROR - [request_id.py:82] - dispatch() - Request failed: POST /api/v1/auth/login [request_id=aaf0ec1b-6448-4545-91dc-0548ef33cb15] - ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:01:49 - app.middleware.prometheus_middleware - ERROR - [prometheus_middleware.py:131] - dispatch() - 请求处理异常: POST /api/v1/auth/login - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:01:49 - app.middleware.error_handler - ERROR - [error_handler.py:225] - general_exception_handler() - Unhandled Exception: ConnectionError - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。. [request_id=aaf0ec1b-6448-4545-91dc-0548ef33cb15, path=/api/v1/auth/login]
Traceback:
Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 264, in connect
    sock = self.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\retry.py", line 46, in call_with_retry
    return do()
           ^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 265, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            ^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 627, in _connect
    raise err
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 615, in _connect
    sock.connect(socket_address)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\prometheus_middleware.py", line 106, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\request_id.py", line 67, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 245, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 807, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 764, in sync_wrapper
    self._check_request_limit(request, func, False)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 630, in _check_request_limit
    self.__evaluate_limits(request, _endpoint_key, all_limits)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 509, in __evaluate_limits
    if not self.limiter.hit(lim.limit, *args, cost=cost):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\strategies.py", line 157, in hit
    self.storage.incr(
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\base.py", line 25, in inner
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\redis.py", line 224, in incr
    return int(self.lua_incr_expire([key], [expiry, amount]))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5931, in __call__
    return client.evalsha(self.sha, len(keys), *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5307, in evalsha
    return self._evalsha("EVALSHA", sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5291, in _evalsha
    return self.execute_command(command, sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\client.py", line 533, in execute_command
    conn = self.connection or pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 1086, in get_connection
    connection.connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 270, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.

2026-01-19 21:01:50 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:01:50 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:01:50 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:01:50 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:01:50 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:01:50 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:01:50 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:01:50 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:01:50 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:01:50 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:01:50 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:01:50 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:01:50 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:01:54 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:01:54 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:01:54 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:01:54 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:01:54 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:01:54 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:01:54 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:01:54 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:01:54 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:01:54 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:01:54 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:01:54 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:01:54 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:01:54 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:01:54 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:01:54 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:01:54 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:01:54 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/auth/login [request_id=e3504f9c-1830-4afb-a5f4-b4df47212b01]
2026-01-19 21:01:58 - app.middleware.request_id - ERROR - [request_id.py:82] - dispatch() - Request failed: POST /api/v1/auth/login [request_id=e3504f9c-1830-4afb-a5f4-b4df47212b01] - ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:01:58 - app.middleware.prometheus_middleware - ERROR - [prometheus_middleware.py:131] - dispatch() - 请求处理异常: POST /api/v1/auth/login - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:01:58 - app.middleware.error_handler - ERROR - [error_handler.py:225] - general_exception_handler() - Unhandled Exception: ConnectionError - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。. [request_id=e3504f9c-1830-4afb-a5f4-b4df47212b01, path=/api/v1/auth/login]
Traceback:
Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 264, in connect
    sock = self.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\retry.py", line 46, in call_with_retry
    return do()
           ^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 265, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            ^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 627, in _connect
    raise err
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 615, in _connect
    sock.connect(socket_address)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\prometheus_middleware.py", line 106, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\request_id.py", line 67, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 245, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 807, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 764, in sync_wrapper
    self._check_request_limit(request, func, False)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 630, in _check_request_limit
    self.__evaluate_limits(request, _endpoint_key, all_limits)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 509, in __evaluate_limits
    if not self.limiter.hit(lim.limit, *args, cost=cost):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\strategies.py", line 157, in hit
    self.storage.incr(
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\base.py", line 25, in inner
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\redis.py", line 224, in incr
    return int(self.lua_incr_expire([key], [expiry, amount]))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5931, in __call__
    return client.evalsha(self.sha, len(keys), *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5307, in evalsha
    return self._evalsha("EVALSHA", sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5291, in _evalsha
    return self.execute_command(command, sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\client.py", line 533, in execute_command
    conn = self.connection or pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 1086, in get_connection
    connection.connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 270, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.

2026-01-19 21:01:59 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:01:59 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:01:59 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:01:59 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:01:59 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:01:59 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:01:59 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:01:59 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:01:59 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:01:59 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:01:59 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:01:59 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:01:59 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:02:03 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:02:03 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:02:03 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:02:03 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:02:03 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:02:03 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:02:03 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:02:03 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:02:03 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:02:03 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:02:03 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:02:03 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:02:03 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:02:03 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:02:03 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:02:03 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:02:03 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:02:03 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/auth/login [request_id=18c20484-0d70-41eb-b3fd-beafca48fdb3]
2026-01-19 21:02:07 - app.middleware.request_id - ERROR - [request_id.py:82] - dispatch() - Request failed: POST /api/v1/auth/login [request_id=18c20484-0d70-41eb-b3fd-beafca48fdb3] - ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:02:07 - app.middleware.prometheus_middleware - ERROR - [prometheus_middleware.py:131] - dispatch() - 请求处理异常: POST /api/v1/auth/login - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:02:07 - app.middleware.error_handler - ERROR - [error_handler.py:225] - general_exception_handler() - Unhandled Exception: ConnectionError - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。. [request_id=18c20484-0d70-41eb-b3fd-beafca48fdb3, path=/api/v1/auth/login]
Traceback:
Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 264, in connect
    sock = self.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\retry.py", line 46, in call_with_retry
    return do()
           ^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 265, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            ^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 627, in _connect
    raise err
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 615, in _connect
    sock.connect(socket_address)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\prometheus_middleware.py", line 106, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\request_id.py", line 67, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 245, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 807, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 764, in sync_wrapper
    self._check_request_limit(request, func, False)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 630, in _check_request_limit
    self.__evaluate_limits(request, _endpoint_key, all_limits)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 509, in __evaluate_limits
    if not self.limiter.hit(lim.limit, *args, cost=cost):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\strategies.py", line 157, in hit
    self.storage.incr(
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\base.py", line 25, in inner
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\redis.py", line 224, in incr
    return int(self.lua_incr_expire([key], [expiry, amount]))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5931, in __call__
    return client.evalsha(self.sha, len(keys), *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5307, in evalsha
    return self._evalsha("EVALSHA", sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5291, in _evalsha
    return self.execute_command(command, sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\client.py", line 533, in execute_command
    conn = self.connection or pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 1086, in get_connection
    connection.connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 270, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.

2026-01-19 21:02:08 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:02:08 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:02:08 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:02:08 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:02:08 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:02:08 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:02:08 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:02:08 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:02:08 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:02:08 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:02:08 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:02:08 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:02:08 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:02:12 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:02:12 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:02:12 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:02:12 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:02:12 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:02:12 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:02:12 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:02:12 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:02:12 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:02:12 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:02:12 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:02:12 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:02:12 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:02:12 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:02:12 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:02:12 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:02:12 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:02:12 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/auth/login [request_id=fb4aaf3c-35a1-4c56-bbdd-2c408c53e641]
2026-01-19 21:02:16 - app.middleware.request_id - ERROR - [request_id.py:82] - dispatch() - Request failed: POST /api/v1/auth/login [request_id=fb4aaf3c-35a1-4c56-bbdd-2c408c53e641] - ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:02:16 - app.middleware.prometheus_middleware - ERROR - [prometheus_middleware.py:131] - dispatch() - 请求处理异常: POST /api/v1/auth/login - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:02:16 - app.middleware.error_handler - ERROR - [error_handler.py:225] - general_exception_handler() - Unhandled Exception: ConnectionError - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。. [request_id=fb4aaf3c-35a1-4c56-bbdd-2c408c53e641, path=/api/v1/auth/login]
Traceback:
Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 264, in connect
    sock = self.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\retry.py", line 46, in call_with_retry
    return do()
           ^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 265, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            ^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 627, in _connect
    raise err
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 615, in _connect
    sock.connect(socket_address)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\prometheus_middleware.py", line 106, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\request_id.py", line 67, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 245, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 807, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 764, in sync_wrapper
    self._check_request_limit(request, func, False)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 630, in _check_request_limit
    self.__evaluate_limits(request, _endpoint_key, all_limits)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 509, in __evaluate_limits
    if not self.limiter.hit(lim.limit, *args, cost=cost):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\strategies.py", line 157, in hit
    self.storage.incr(
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\base.py", line 25, in inner
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\redis.py", line 224, in incr
    return int(self.lua_incr_expire([key], [expiry, amount]))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5931, in __call__
    return client.evalsha(self.sha, len(keys), *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5307, in evalsha
    return self._evalsha("EVALSHA", sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5291, in _evalsha
    return self.execute_command(command, sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\client.py", line 533, in execute_command
    conn = self.connection or pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 1086, in get_connection
    connection.connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 270, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.

2026-01-19 21:02:17 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:02:17 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:02:17 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:02:17 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:02:17 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:02:17 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:02:17 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:02:17 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:02:17 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:02:17 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:02:17 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:02:17 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:02:17 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:02:21 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:02:21 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:02:21 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:02:21 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:02:21 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:02:21 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:02:21 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:02:21 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:02:21 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:02:21 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:02:21 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:02:21 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:02:21 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:02:21 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:02:21 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:02:21 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:02:21 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:02:21 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/auth/login [request_id=3128b242-ddcf-40b9-b0d8-365528f5c2ae]
2026-01-19 21:02:25 - app.middleware.request_id - ERROR - [request_id.py:82] - dispatch() - Request failed: POST /api/v1/auth/login [request_id=3128b242-ddcf-40b9-b0d8-365528f5c2ae] - ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:02:25 - app.middleware.prometheus_middleware - ERROR - [prometheus_middleware.py:131] - dispatch() - 请求处理异常: POST /api/v1/auth/login - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:02:25 - app.middleware.error_handler - ERROR - [error_handler.py:225] - general_exception_handler() - Unhandled Exception: ConnectionError - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。. [request_id=3128b242-ddcf-40b9-b0d8-365528f5c2ae, path=/api/v1/auth/login]
Traceback:
Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 264, in connect
    sock = self.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\retry.py", line 46, in call_with_retry
    return do()
           ^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 265, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            ^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 627, in _connect
    raise err
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 615, in _connect
    sock.connect(socket_address)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\prometheus_middleware.py", line 106, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\request_id.py", line 67, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 245, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 807, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 764, in sync_wrapper
    self._check_request_limit(request, func, False)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 630, in _check_request_limit
    self.__evaluate_limits(request, _endpoint_key, all_limits)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 509, in __evaluate_limits
    if not self.limiter.hit(lim.limit, *args, cost=cost):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\strategies.py", line 157, in hit
    self.storage.incr(
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\base.py", line 25, in inner
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\redis.py", line 224, in incr
    return int(self.lua_incr_expire([key], [expiry, amount]))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5931, in __call__
    return client.evalsha(self.sha, len(keys), *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5307, in evalsha
    return self._evalsha("EVALSHA", sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5291, in _evalsha
    return self.execute_command(command, sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\client.py", line 533, in execute_command
    conn = self.connection or pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 1086, in get_connection
    connection.connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 270, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.

2026-01-19 21:02:26 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:02:26 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:02:26 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:02:26 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:02:26 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:02:26 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:02:26 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:02:26 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:02:26 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:02:26 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:02:26 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:02:26 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:02:26 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:02:30 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:02:30 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:02:30 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:02:30 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:02:30 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:02:30 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:02:30 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:02:30 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:02:30 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:02:30 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:02:30 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:02:30 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:02:30 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:02:30 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:02:30 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:02:30 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:02:30 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:02:30 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/auth/login [request_id=35f06de2-c275-43e2-9668-7dc66b75564e]
2026-01-19 21:02:34 - app.middleware.request_id - ERROR - [request_id.py:82] - dispatch() - Request failed: POST /api/v1/auth/login [request_id=35f06de2-c275-43e2-9668-7dc66b75564e] - ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:02:34 - app.middleware.prometheus_middleware - ERROR - [prometheus_middleware.py:131] - dispatch() - 请求处理异常: POST /api/v1/auth/login - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:02:34 - app.middleware.error_handler - ERROR - [error_handler.py:225] - general_exception_handler() - Unhandled Exception: ConnectionError - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。. [request_id=35f06de2-c275-43e2-9668-7dc66b75564e, path=/api/v1/auth/login]
Traceback:
Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 264, in connect
    sock = self.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\retry.py", line 46, in call_with_retry
    return do()
           ^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 265, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            ^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 627, in _connect
    raise err
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 615, in _connect
    sock.connect(socket_address)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\prometheus_middleware.py", line 106, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\request_id.py", line 67, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 245, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 807, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 764, in sync_wrapper
    self._check_request_limit(request, func, False)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 630, in _check_request_limit
    self.__evaluate_limits(request, _endpoint_key, all_limits)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 509, in __evaluate_limits
    if not self.limiter.hit(lim.limit, *args, cost=cost):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\strategies.py", line 157, in hit
    self.storage.incr(
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\base.py", line 25, in inner
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\redis.py", line 224, in incr
    return int(self.lua_incr_expire([key], [expiry, amount]))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5931, in __call__
    return client.evalsha(self.sha, len(keys), *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5307, in evalsha
    return self._evalsha("EVALSHA", sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5291, in _evalsha
    return self.execute_command(command, sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\client.py", line 533, in execute_command
    conn = self.connection or pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 1086, in get_connection
    connection.connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 270, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.

2026-01-19 21:02:35 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:02:35 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:02:35 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:02:35 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:02:35 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:02:35 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:02:35 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:02:35 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:02:35 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:02:35 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:02:35 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:02:35 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:02:35 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:02:39 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:02:39 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:02:39 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:02:39 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:02:39 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:02:39 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:02:39 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:02:39 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:02:39 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:02:39 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:02:39 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:02:39 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:02:39 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:02:39 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:02:39 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:02:39 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:02:39 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:02:39 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/auth/login [request_id=b8a59907-cd30-40f9-8852-2d5f7c2d227c]
2026-01-19 21:02:43 - app.middleware.request_id - ERROR - [request_id.py:82] - dispatch() - Request failed: POST /api/v1/auth/login [request_id=b8a59907-cd30-40f9-8852-2d5f7c2d227c] - ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:02:43 - app.middleware.prometheus_middleware - ERROR - [prometheus_middleware.py:131] - dispatch() - 请求处理异常: POST /api/v1/auth/login - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:02:43 - app.middleware.error_handler - ERROR - [error_handler.py:225] - general_exception_handler() - Unhandled Exception: ConnectionError - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。. [request_id=b8a59907-cd30-40f9-8852-2d5f7c2d227c, path=/api/v1/auth/login]
Traceback:
Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 264, in connect
    sock = self.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\retry.py", line 46, in call_with_retry
    return do()
           ^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 265, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            ^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 627, in _connect
    raise err
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 615, in _connect
    sock.connect(socket_address)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\prometheus_middleware.py", line 106, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\request_id.py", line 67, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 245, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 807, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 764, in sync_wrapper
    self._check_request_limit(request, func, False)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 630, in _check_request_limit
    self.__evaluate_limits(request, _endpoint_key, all_limits)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 509, in __evaluate_limits
    if not self.limiter.hit(lim.limit, *args, cost=cost):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\strategies.py", line 157, in hit
    self.storage.incr(
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\base.py", line 25, in inner
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\redis.py", line 224, in incr
    return int(self.lua_incr_expire([key], [expiry, amount]))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5931, in __call__
    return client.evalsha(self.sha, len(keys), *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5307, in evalsha
    return self._evalsha("EVALSHA", sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5291, in _evalsha
    return self.execute_command(command, sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\client.py", line 533, in execute_command
    conn = self.connection or pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 1086, in get_connection
    connection.connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 270, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.

2026-01-19 21:02:44 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:02:44 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:02:44 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:02:44 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:02:44 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:02:44 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:02:44 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:02:44 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:02:44 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:02:44 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:02:44 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:02:44 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:02:44 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:02:48 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:02:48 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:02:48 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:02:48 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:02:48 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:02:48 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:02:48 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:02:48 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:02:48 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:02:48 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:02:48 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:02:48 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:02:48 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:02:48 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:02:48 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:02:48 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:02:48 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:02:48 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/auth/login [request_id=3223dc76-e691-4852-889e-f1d703e0b399]
2026-01-19 21:02:52 - app.middleware.request_id - ERROR - [request_id.py:82] - dispatch() - Request failed: POST /api/v1/auth/login [request_id=3223dc76-e691-4852-889e-f1d703e0b399] - ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:02:52 - app.middleware.prometheus_middleware - ERROR - [prometheus_middleware.py:131] - dispatch() - 请求处理异常: POST /api/v1/auth/login - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:02:52 - app.middleware.error_handler - ERROR - [error_handler.py:225] - general_exception_handler() - Unhandled Exception: ConnectionError - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。. [request_id=3223dc76-e691-4852-889e-f1d703e0b399, path=/api/v1/auth/login]
Traceback:
Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 264, in connect
    sock = self.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\retry.py", line 46, in call_with_retry
    return do()
           ^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 265, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            ^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 627, in _connect
    raise err
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 615, in _connect
    sock.connect(socket_address)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\prometheus_middleware.py", line 106, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\request_id.py", line 67, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 245, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 807, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 764, in sync_wrapper
    self._check_request_limit(request, func, False)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 630, in _check_request_limit
    self.__evaluate_limits(request, _endpoint_key, all_limits)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 509, in __evaluate_limits
    if not self.limiter.hit(lim.limit, *args, cost=cost):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\strategies.py", line 157, in hit
    self.storage.incr(
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\base.py", line 25, in inner
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\redis.py", line 224, in incr
    return int(self.lua_incr_expire([key], [expiry, amount]))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5931, in __call__
    return client.evalsha(self.sha, len(keys), *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5307, in evalsha
    return self._evalsha("EVALSHA", sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5291, in _evalsha
    return self.execute_command(command, sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\client.py", line 533, in execute_command
    conn = self.connection or pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 1086, in get_connection
    connection.connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 270, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.

2026-01-19 21:02:53 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:02:53 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:02:53 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:02:53 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:02:53 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:02:53 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:02:53 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:02:53 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:02:53 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:02:53 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:02:53 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:02:53 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:02:53 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:02:57 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:02:57 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:02:57 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:02:57 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:02:57 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:02:57 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:02:57 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:02:57 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:02:57 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:02:57 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:02:57 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:02:57 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:02:57 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:02:57 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:02:57 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:02:57 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:02:57 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:02:57 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/auth/login [request_id=e7045b8f-1ece-45a3-aade-3c0ffd4359f7]
2026-01-19 21:03:01 - app.middleware.request_id - ERROR - [request_id.py:82] - dispatch() - Request failed: POST /api/v1/auth/login [request_id=e7045b8f-1ece-45a3-aade-3c0ffd4359f7] - ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:03:01 - app.middleware.prometheus_middleware - ERROR - [prometheus_middleware.py:131] - dispatch() - 请求处理异常: POST /api/v1/auth/login - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:03:01 - app.middleware.error_handler - ERROR - [error_handler.py:225] - general_exception_handler() - Unhandled Exception: ConnectionError - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。. [request_id=e7045b8f-1ece-45a3-aade-3c0ffd4359f7, path=/api/v1/auth/login]
Traceback:
Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 264, in connect
    sock = self.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\retry.py", line 46, in call_with_retry
    return do()
           ^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 265, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            ^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 627, in _connect
    raise err
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 615, in _connect
    sock.connect(socket_address)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\prometheus_middleware.py", line 106, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\request_id.py", line 67, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 245, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 807, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 764, in sync_wrapper
    self._check_request_limit(request, func, False)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 630, in _check_request_limit
    self.__evaluate_limits(request, _endpoint_key, all_limits)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 509, in __evaluate_limits
    if not self.limiter.hit(lim.limit, *args, cost=cost):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\strategies.py", line 157, in hit
    self.storage.incr(
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\base.py", line 25, in inner
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\redis.py", line 224, in incr
    return int(self.lua_incr_expire([key], [expiry, amount]))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5931, in __call__
    return client.evalsha(self.sha, len(keys), *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5307, in evalsha
    return self._evalsha("EVALSHA", sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5291, in _evalsha
    return self.execute_command(command, sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\client.py", line 533, in execute_command
    conn = self.connection or pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 1086, in get_connection
    connection.connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 270, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.

2026-01-19 21:03:02 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:03:02 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:03:02 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:03:02 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:03:02 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:03:02 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:03:02 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:03:02 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:03:02 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:03:02 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:03:02 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:03:02 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:03:02 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:03:06 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:03:06 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:03:06 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:03:06 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:03:06 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:03:06 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:03:06 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:03:06 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:03:06 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:03:06 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:03:06 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:03:06 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:03:06 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:03:06 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:03:06 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:03:06 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:03:06 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:03:06 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/auth/login [request_id=f426eb1d-b924-4eba-8eff-166af3f3f250]
2026-01-19 21:03:11 - app.middleware.request_id - ERROR - [request_id.py:82] - dispatch() - Request failed: POST /api/v1/auth/login [request_id=f426eb1d-b924-4eba-8eff-166af3f3f250] - ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:03:11 - app.middleware.prometheus_middleware - ERROR - [prometheus_middleware.py:131] - dispatch() - 请求处理异常: POST /api/v1/auth/login - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:03:11 - app.middleware.error_handler - ERROR - [error_handler.py:225] - general_exception_handler() - Unhandled Exception: ConnectionError - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。. [request_id=f426eb1d-b924-4eba-8eff-166af3f3f250, path=/api/v1/auth/login]
Traceback:
Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 264, in connect
    sock = self.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\retry.py", line 46, in call_with_retry
    return do()
           ^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 265, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            ^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 627, in _connect
    raise err
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 615, in _connect
    sock.connect(socket_address)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\prometheus_middleware.py", line 106, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\request_id.py", line 67, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 245, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 807, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 764, in sync_wrapper
    self._check_request_limit(request, func, False)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 630, in _check_request_limit
    self.__evaluate_limits(request, _endpoint_key, all_limits)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 509, in __evaluate_limits
    if not self.limiter.hit(lim.limit, *args, cost=cost):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\strategies.py", line 157, in hit
    self.storage.incr(
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\base.py", line 25, in inner
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\redis.py", line 224, in incr
    return int(self.lua_incr_expire([key], [expiry, amount]))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5931, in __call__
    return client.evalsha(self.sha, len(keys), *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5307, in evalsha
    return self._evalsha("EVALSHA", sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5291, in _evalsha
    return self.execute_command(command, sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\client.py", line 533, in execute_command
    conn = self.connection or pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 1086, in get_connection
    connection.connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 270, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.

2026-01-19 21:03:11 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:03:11 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:03:11 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:03:11 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:03:11 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:03:11 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:03:11 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:03:11 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:03:11 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:03:11 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:03:11 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:03:11 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:03:11 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:03:16 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:03:16 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:03:16 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:03:16 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:03:16 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:03:16 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:03:16 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:03:16 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:03:16 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:03:16 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:03:16 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:03:16 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:03:16 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:03:16 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:03:16 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:03:16 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:03:16 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:03:16 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/auth/login [request_id=24897e65-93a3-48f8-ac6c-fc780769fdf5]
2026-01-19 21:03:20 - app.middleware.request_id - ERROR - [request_id.py:82] - dispatch() - Request failed: POST /api/v1/auth/login [request_id=24897e65-93a3-48f8-ac6c-fc780769fdf5] - ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:03:20 - app.middleware.prometheus_middleware - ERROR - [prometheus_middleware.py:131] - dispatch() - 请求处理异常: POST /api/v1/auth/login - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:03:20 - app.middleware.error_handler - ERROR - [error_handler.py:225] - general_exception_handler() - Unhandled Exception: ConnectionError - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。. [request_id=24897e65-93a3-48f8-ac6c-fc780769fdf5, path=/api/v1/auth/login]
Traceback:
Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 264, in connect
    sock = self.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\retry.py", line 46, in call_with_retry
    return do()
           ^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 265, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            ^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 627, in _connect
    raise err
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 615, in _connect
    sock.connect(socket_address)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\prometheus_middleware.py", line 106, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\request_id.py", line 67, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 245, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 807, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 764, in sync_wrapper
    self._check_request_limit(request, func, False)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 630, in _check_request_limit
    self.__evaluate_limits(request, _endpoint_key, all_limits)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 509, in __evaluate_limits
    if not self.limiter.hit(lim.limit, *args, cost=cost):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\strategies.py", line 157, in hit
    self.storage.incr(
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\base.py", line 25, in inner
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\redis.py", line 224, in incr
    return int(self.lua_incr_expire([key], [expiry, amount]))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5931, in __call__
    return client.evalsha(self.sha, len(keys), *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5307, in evalsha
    return self._evalsha("EVALSHA", sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5291, in _evalsha
    return self.execute_command(command, sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\client.py", line 533, in execute_command
    conn = self.connection or pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 1086, in get_connection
    connection.connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 270, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.

2026-01-19 21:03:20 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:03:20 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:03:20 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:03:20 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:03:20 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:03:20 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:03:20 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:03:20 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:03:20 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:03:20 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:03:20 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:03:20 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:03:20 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:03:24 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:03:24 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:03:24 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:03:24 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:03:24 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:03:24 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:03:24 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:03:24 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:03:24 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:03:24 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:03:24 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:03:24 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:03:24 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:03:24 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:03:24 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:03:24 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:03:24 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:03:25 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/auth/login [request_id=1a353ded-b091-4343-9a9c-6eeb43d83935]
2026-01-19 21:03:29 - app.middleware.request_id - ERROR - [request_id.py:82] - dispatch() - Request failed: POST /api/v1/auth/login [request_id=1a353ded-b091-4343-9a9c-6eeb43d83935] - ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:03:29 - app.middleware.prometheus_middleware - ERROR - [prometheus_middleware.py:131] - dispatch() - 请求处理异常: POST /api/v1/auth/login - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:03:29 - app.middleware.error_handler - ERROR - [error_handler.py:225] - general_exception_handler() - Unhandled Exception: ConnectionError - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。. [request_id=1a353ded-b091-4343-9a9c-6eeb43d83935, path=/api/v1/auth/login]
Traceback:
Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 264, in connect
    sock = self.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\retry.py", line 46, in call_with_retry
    return do()
           ^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 265, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            ^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 627, in _connect
    raise err
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 615, in _connect
    sock.connect(socket_address)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\prometheus_middleware.py", line 106, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\request_id.py", line 67, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 245, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 807, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 764, in sync_wrapper
    self._check_request_limit(request, func, False)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 630, in _check_request_limit
    self.__evaluate_limits(request, _endpoint_key, all_limits)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 509, in __evaluate_limits
    if not self.limiter.hit(lim.limit, *args, cost=cost):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\strategies.py", line 157, in hit
    self.storage.incr(
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\base.py", line 25, in inner
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\redis.py", line 224, in incr
    return int(self.lua_incr_expire([key], [expiry, amount]))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5931, in __call__
    return client.evalsha(self.sha, len(keys), *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5307, in evalsha
    return self._evalsha("EVALSHA", sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5291, in _evalsha
    return self.execute_command(command, sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\client.py", line 533, in execute_command
    conn = self.connection or pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 1086, in get_connection
    connection.connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 270, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.

2026-01-19 21:03:29 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:03:29 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:03:29 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:03:29 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:03:29 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:03:29 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:03:29 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:03:29 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:03:29 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:03:29 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:03:29 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:03:29 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:03:29 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:03:33 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:03:33 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:03:33 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:03:33 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:03:33 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:03:33 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:03:33 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:03:33 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:03:33 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:03:33 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:03:33 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:03:33 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:03:33 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:03:33 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:03:33 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:03:33 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:03:33 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:03:34 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/auth/login [request_id=14d10401-7b4b-4f99-b179-d1e430fb33a0]
2026-01-19 21:03:38 - app.middleware.request_id - ERROR - [request_id.py:82] - dispatch() - Request failed: POST /api/v1/auth/login [request_id=14d10401-7b4b-4f99-b179-d1e430fb33a0] - ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:03:38 - app.middleware.prometheus_middleware - ERROR - [prometheus_middleware.py:131] - dispatch() - 请求处理异常: POST /api/v1/auth/login - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:03:38 - app.middleware.error_handler - ERROR - [error_handler.py:225] - general_exception_handler() - Unhandled Exception: ConnectionError - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。. [request_id=14d10401-7b4b-4f99-b179-d1e430fb33a0, path=/api/v1/auth/login]
Traceback:
Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 264, in connect
    sock = self.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\retry.py", line 46, in call_with_retry
    return do()
           ^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 265, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            ^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 627, in _connect
    raise err
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 615, in _connect
    sock.connect(socket_address)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\prometheus_middleware.py", line 106, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\request_id.py", line 67, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 245, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 807, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 764, in sync_wrapper
    self._check_request_limit(request, func, False)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 630, in _check_request_limit
    self.__evaluate_limits(request, _endpoint_key, all_limits)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 509, in __evaluate_limits
    if not self.limiter.hit(lim.limit, *args, cost=cost):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\strategies.py", line 157, in hit
    self.storage.incr(
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\base.py", line 25, in inner
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\redis.py", line 224, in incr
    return int(self.lua_incr_expire([key], [expiry, amount]))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5931, in __call__
    return client.evalsha(self.sha, len(keys), *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5307, in evalsha
    return self._evalsha("EVALSHA", sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5291, in _evalsha
    return self.execute_command(command, sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\client.py", line 533, in execute_command
    conn = self.connection or pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 1086, in get_connection
    connection.connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 270, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.

2026-01-19 21:03:39 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:03:39 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:03:39 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:03:39 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:03:39 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:03:39 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:03:39 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:03:39 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:03:39 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:03:39 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:03:39 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:03:39 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:03:39 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:03:43 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:03:43 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:03:43 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:03:43 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:03:43 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:03:43 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:03:43 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:03:43 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:03:43 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:03:43 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:03:43 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:03:43 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:03:43 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:03:43 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:03:43 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:03:43 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:03:43 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:03:44 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/auth/login [request_id=a9980da9-7202-4381-8f22-b3962ca42d12]
2026-01-19 21:03:48 - app.middleware.request_id - ERROR - [request_id.py:82] - dispatch() - Request failed: POST /api/v1/auth/login [request_id=a9980da9-7202-4381-8f22-b3962ca42d12] - ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:03:48 - app.middleware.prometheus_middleware - ERROR - [prometheus_middleware.py:131] - dispatch() - 请求处理异常: POST /api/v1/auth/login - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:03:48 - app.middleware.error_handler - ERROR - [error_handler.py:225] - general_exception_handler() - Unhandled Exception: ConnectionError - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。. [request_id=a9980da9-7202-4381-8f22-b3962ca42d12, path=/api/v1/auth/login]
Traceback:
Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 264, in connect
    sock = self.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\retry.py", line 46, in call_with_retry
    return do()
           ^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 265, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            ^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 627, in _connect
    raise err
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 615, in _connect
    sock.connect(socket_address)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\prometheus_middleware.py", line 106, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\request_id.py", line 67, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 245, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 807, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 764, in sync_wrapper
    self._check_request_limit(request, func, False)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 630, in _check_request_limit
    self.__evaluate_limits(request, _endpoint_key, all_limits)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 509, in __evaluate_limits
    if not self.limiter.hit(lim.limit, *args, cost=cost):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\strategies.py", line 157, in hit
    self.storage.incr(
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\base.py", line 25, in inner
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\redis.py", line 224, in incr
    return int(self.lua_incr_expire([key], [expiry, amount]))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5931, in __call__
    return client.evalsha(self.sha, len(keys), *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5307, in evalsha
    return self._evalsha("EVALSHA", sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5291, in _evalsha
    return self.execute_command(command, sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\client.py", line 533, in execute_command
    conn = self.connection or pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 1086, in get_connection
    connection.connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 270, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.

2026-01-19 21:03:48 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:03:48 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:03:48 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:03:48 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:03:48 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:03:48 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:03:48 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:03:48 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:03:48 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:03:48 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:03:48 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:03:48 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:03:48 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:03:52 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:03:52 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:03:52 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:03:52 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:03:52 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:03:52 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:03:52 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:03:52 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:03:52 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:03:52 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:03:52 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:03:52 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:03:52 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:03:52 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:03:52 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:03:52 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:03:52 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:03:53 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/auth/login [request_id=4b4523d3-4e61-4b56-bc31-b1eba7afa274]
2026-01-19 21:03:57 - app.middleware.request_id - ERROR - [request_id.py:82] - dispatch() - Request failed: POST /api/v1/auth/login [request_id=4b4523d3-4e61-4b56-bc31-b1eba7afa274] - ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:03:57 - app.middleware.prometheus_middleware - ERROR - [prometheus_middleware.py:131] - dispatch() - 请求处理异常: POST /api/v1/auth/login - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:03:57 - app.middleware.error_handler - ERROR - [error_handler.py:225] - general_exception_handler() - Unhandled Exception: ConnectionError - Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。. [request_id=4b4523d3-4e61-4b56-bc31-b1eba7afa274, path=/api/v1/auth/login]
Traceback:
Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 264, in connect
    sock = self.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\retry.py", line 46, in call_with_retry
    return do()
           ^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 265, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            ^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 627, in _connect
    raise err
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 615, in _connect
    sock.connect(socket_address)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\prometheus_middleware.py", line 106, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\backend\app\middleware\request_id.py", line 67, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\fastapi\routing.py", line 245, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 807, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 764, in sync_wrapper
    self._check_request_limit(request, func, False)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 630, in _check_request_limit
    self.__evaluate_limits(request, _endpoint_key, all_limits)
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\slowapi\extension.py", line 509, in __evaluate_limits
    if not self.limiter.hit(lim.limit, *args, cost=cost):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\strategies.py", line 157, in hit
    self.storage.incr(
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\base.py", line 25, in inner
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\limits\storage\redis.py", line 224, in incr
    return int(self.lua_incr_expire([key], [expiry, amount]))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5931, in __call__
    return client.evalsha(self.sha, len(keys), *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5307, in evalsha
    return self._evalsha("EVALSHA", sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\commands\core.py", line 5291, in _evalsha
    return self.execute_command(command, sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\client.py", line 533, in execute_command
    conn = self.connection or pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 1086, in get_connection
    connection.connect()
  File "E:\IDEWorkplaces\Kiro\RAGAgentLangChain\.venv\Lib\site-packages\redis\connection.py", line 270, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.

2026-01-19 21:03:57 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:03:57 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:03:57 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:03:57 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:03:57 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:03:57 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:03:57 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:03:57 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:03:57 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:03:57 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:03:57 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:03:57 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:03:57 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:04:01 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:04:01 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:04:01 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:04:01 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:04:01 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:04:01 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:04:01 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:04:02 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:04:02 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:04:02 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:04:02 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:04:02 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:04:02 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:04:02 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:04:02 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:04:02 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:04:02 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:04:02 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: GET /api/v1/system/config [request_id=aec6beb8-00e9-4ca7-a14f-ba4c29a322ab]
2026-01-19 21:04:02 - app.middleware.error_handler - WARNING - [error_handler.py:151] - http_exception_handler() - HTTPException: 401 - 未提供认证令牌 [request_id=aec6beb8-00e9-4ca7-a14f-ba4c29a322ab, path=/api/v1/system/config]
2026-01-19 21:04:02 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: GET /api/v1/system/config [request_id=aec6beb8-00e9-4ca7-a14f-ba4c29a322ab, status=401]
2026-01-19 21:04:02 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: GET /api/v1/system/stats/all [request_id=ab00fc35-5591-499e-827e-d5a6253c1df3]
2026-01-19 21:04:02 - app.middleware.error_handler - WARNING - [error_handler.py:151] - http_exception_handler() - HTTPException: 401 - 未提供认证令牌 [request_id=ab00fc35-5591-499e-827e-d5a6253c1df3, path=/api/v1/system/stats/all]
2026-01-19 21:04:02 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: GET /api/v1/system/stats/all [request_id=ab00fc35-5591-499e-827e-d5a6253c1df3, status=401]
2026-01-19 21:04:02 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:04:02 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:04:02 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:04:02 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:04:02 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:04:02 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:04:02 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:04:02 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:04:02 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:04:02 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:04:02 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:04:02 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:04:02 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:04:06 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:04:06 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:04:06 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:04:06 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:04:06 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:04:06 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:04:06 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:04:06 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:04:06 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:04:06 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:04:06 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:04:06 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:04:06 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:04:06 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:04:06 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:04:06 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:04:06 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:04:06 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: GET /api/v1/knowledge-bases/1/permissions [request_id=37a14379-ebe4-4c69-8eee-00d94fed4f2d]
2026-01-19 21:04:10 - app.core.security - ERROR - [security.py:359] - is_token_blacklisted() - 检查令牌黑名单失败: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:04:10 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: GET /api/v1/knowledge-bases/1/permissions [request_id=37a14379-ebe4-4c69-8eee-00d94fed4f2d, status=200]
2026-01-19 21:04:10 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:04:10 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:04:10 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:04:10 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:04:10 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:04:10 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:04:10 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:04:10 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:04:10 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:04:10 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:04:10 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:04:10 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:04:10 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:04:14 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:04:14 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:04:14 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:04:14 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:04:14 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:04:14 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:04:14 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:04:14 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:04:14 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:04:14 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:04:14 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:04:14 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:04:14 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:04:14 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:04:14 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:04:14 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:04:14 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:04:15 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/knowledge-bases/1/permissions [request_id=00e968a5-a58e-4850-b052-340f5e4cad5f]
2026-01-19 21:04:19 - app.core.security - ERROR - [security.py:359] - is_token_blacklisted() - 检查令牌黑名单失败: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:04:19 - app.services.knowledge_base_permission_service - INFO - [knowledge_base_permission_service.py:216] - add_permission() - 添加权限成功: kb_id=1, user_id=2, type=viewer
2026-01-19 21:04:19 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: POST /api/v1/knowledge-bases/1/permissions [request_id=00e968a5-a58e-4850-b052-340f5e4cad5f, status=201]
2026-01-19 21:04:19 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:04:19 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:04:19 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:04:19 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:04:19 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:04:19 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:04:19 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:04:19 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:04:19 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:04:19 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:04:19 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:04:19 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:04:19 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:04:23 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:04:23 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:04:23 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:04:23 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:04:23 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:04:23 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:04:23 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:04:23 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:04:23 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:04:23 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:04:23 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:04:23 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:04:23 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:04:23 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:04:23 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:04:23 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:04:23 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:04:24 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: PUT /api/v1/knowledge-bases/1/permissions/1 [request_id=08150142-2618-49b4-82d2-c388c2620f7c]
2026-01-19 21:04:28 - app.core.security - ERROR - [security.py:359] - is_token_blacklisted() - 检查令牌黑名单失败: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:04:28 - app.services.knowledge_base_permission_service - INFO - [knowledge_base_permission_service.py:262] - update_permission() - 更新权限成功: permission_id=1, type=editor
2026-01-19 21:04:28 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: PUT /api/v1/knowledge-bases/1/permissions/1 [request_id=08150142-2618-49b4-82d2-c388c2620f7c, status=200]
2026-01-19 21:04:28 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:04:28 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:04:28 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:04:28 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:04:28 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:04:28 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:04:28 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:04:28 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:04:28 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:04:28 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:04:28 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:04:28 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:04:28 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:04:32 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:04:32 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:04:32 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:04:32 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:04:32 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:04:32 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:04:32 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:04:32 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:04:32 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:04:32 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:04:32 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:04:32 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:04:32 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:04:32 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:04:32 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:04:32 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:04:32 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:04:32 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: DELETE /api/v1/knowledge-bases/1/permissions/1 [request_id=ca838607-2ac1-4433-9b47-fed2d11211f1]
2026-01-19 21:04:36 - app.core.security - ERROR - [security.py:359] - is_token_blacklisted() - 检查令牌黑名单失败: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:04:36 - app.services.knowledge_base_permission_service - INFO - [knowledge_base_permission_service.py:304] - delete_permission() - 删除权限成功: permission_id=1
2026-01-19 21:04:36 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: DELETE /api/v1/knowledge-bases/1/permissions/1 [request_id=ca838607-2ac1-4433-9b47-fed2d11211f1, status=204]
2026-01-19 21:04:36 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:04:36 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:04:36 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:04:36 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:04:36 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:04:36 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:04:36 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:04:36 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:04:36 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:04:36 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:04:36 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:04:36 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:04:36 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:04:40 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:04:40 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:04:40 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:04:40 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:04:40 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:04:40 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:04:40 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:04:40 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:04:40 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:04:40 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:04:40 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:04:40 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:04:40 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:04:40 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:04:40 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:04:40 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:04:40 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:04:41 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/knowledge-bases/1/share [request_id=1900fec2-de4b-4dfd-94fd-58842bad54aa]
2026-01-19 21:04:45 - app.core.security - ERROR - [security.py:359] - is_token_blacklisted() - 检查令牌黑名单失败: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:04:45 - app.services.knowledge_base_permission_service - INFO - [knowledge_base_permission_service.py:216] - add_permission() - 添加权限成功: kb_id=1, user_id=2, type=viewer
2026-01-19 21:04:45 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: POST /api/v1/knowledge-bases/1/share [request_id=1900fec2-de4b-4dfd-94fd-58842bad54aa, status=201]
2026-01-19 21:04:45 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:04:45 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:04:45 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:04:45 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:04:45 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:04:45 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:04:45 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:04:45 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:04:45 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:04:45 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:04:45 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:04:45 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:04:45 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:04:49 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:04:49 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:04:49 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:04:49 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:04:49 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:04:49 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:04:49 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:04:49 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:04:49 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:04:49 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:04:49 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:04:49 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:04:49 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:04:49 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:04:49 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:04:49 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:04:49 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:04:49 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/knowledge-bases/1/share [request_id=ec92cd5f-7c03-4919-b602-c17f4757f2e7]
2026-01-19 21:04:53 - app.core.security - ERROR - [security.py:359] - is_token_blacklisted() - 检查令牌黑名单失败: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:04:53 - app.middleware.error_handler - WARNING - [error_handler.py:151] - http_exception_handler() - HTTPException: 400 - 用户不存在或无权操作 [request_id=ec92cd5f-7c03-4919-b602-c17f4757f2e7, path=/api/v1/knowledge-bases/1/share]
2026-01-19 21:04:53 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: POST /api/v1/knowledge-bases/1/share [request_id=ec92cd5f-7c03-4919-b602-c17f4757f2e7, status=400]
2026-01-19 21:04:53 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:04:53 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:04:53 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:04:53 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:04:53 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:04:53 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:04:53 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:04:53 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:04:53 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:04:53 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:04:53 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:04:53 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:04:53 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:04:57 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:04:57 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:04:57 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:04:57 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:04:57 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:04:57 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:04:57 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:04:57 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:04:57 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:04:57 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:04:57 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:04:57 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:04:57 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:04:57 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:04:57 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:04:57 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:04:57 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:04:58 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/knowledge-bases/1/permissions [request_id=8397386e-d416-4727-98e4-9da516737df7]
2026-01-19 21:05:02 - app.core.security - ERROR - [security.py:359] - is_token_blacklisted() - 检查令牌黑名单失败: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:05:02 - app.middleware.error_handler - WARNING - [error_handler.py:151] - http_exception_handler() - HTTPException: 403 - 无权操作或用户不存在 [request_id=8397386e-d416-4727-98e4-9da516737df7, path=/api/v1/knowledge-bases/1/permissions]
2026-01-19 21:05:02 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: POST /api/v1/knowledge-bases/1/permissions [request_id=8397386e-d416-4727-98e4-9da516737df7, status=403]
2026-01-19 21:05:02 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:05:02 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:05:02 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:05:02 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:05:02 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:05:02 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:05:02 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:05:02 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:05:02 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:05:02 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:05:02 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:05:02 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:05:02 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:05:06 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:05:06 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:05:06 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:05:06 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:05:06 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:05:06 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:05:06 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:05:06 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:05:06 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:05:06 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:05:06 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:05:06 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:05:06 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:05:06 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:05:06 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:05:06 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:05:06 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:05:06 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: GET /api/v1/prompts [request_id=5b8e2756-4f4e-42fe-8299-5432ad65a3a9]
2026-01-19 21:05:10 - app.core.security - ERROR - [security.py:359] - is_token_blacklisted() - 检查令牌黑名单失败: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:05:10 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: GET /api/v1/prompts [request_id=5b8e2756-4f4e-42fe-8299-5432ad65a3a9, status=200]
2026-01-19 21:05:10 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:05:10 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:05:10 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:05:10 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:05:10 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:05:10 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:05:10 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:05:10 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:05:10 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:05:10 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:05:10 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:05:10 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:05:10 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:05:14 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:05:14 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:05:14 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:05:14 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:05:14 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:05:14 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:05:14 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:05:14 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:05:14 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:05:14 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:05:14 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:05:14 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:05:14 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:05:14 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:05:14 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:05:14 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:05:14 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:05:14 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/prompts [request_id=08936738-176e-44ba-b6c9-5cc8aa95bece]
2026-01-19 21:05:19 - app.core.security - ERROR - [security.py:359] - is_token_blacklisted() - 检查令牌黑名单失败: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:05:19 - app.services.system_prompt_service - INFO - [system_prompt_service.py:111] - create_prompt() - 创建提示词成功: user_id=1, prompt_id=1
2026-01-19 21:05:19 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: POST /api/v1/prompts [request_id=08936738-176e-44ba-b6c9-5cc8aa95bece, status=201]
2026-01-19 21:05:19 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:05:19 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:05:19 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:05:19 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:05:19 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:05:19 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:05:19 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:05:19 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:05:19 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:05:19 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:05:19 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:05:19 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:05:19 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:05:23 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:05:23 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:05:23 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:05:23 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:05:23 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:05:23 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:05:23 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:05:23 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:05:23 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:05:23 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:05:23 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:05:23 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:05:23 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:05:23 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:05:23 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:05:23 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:05:23 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:05:23 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: GET /api/v1/prompts/1 [request_id=301ff0e4-e7e7-4618-a28d-a2fdc08a2e2d]
2026-01-19 21:05:27 - app.core.security - ERROR - [security.py:359] - is_token_blacklisted() - 检查令牌黑名单失败: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:05:27 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: GET /api/v1/prompts/1 [request_id=301ff0e4-e7e7-4618-a28d-a2fdc08a2e2d, status=200]
2026-01-19 21:05:27 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:05:27 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:05:27 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:05:27 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:05:27 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:05:27 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:05:27 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:05:27 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:05:27 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:05:27 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:05:27 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:05:27 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:05:27 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:05:31 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:05:31 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:05:31 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:05:31 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:05:31 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:05:31 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:05:31 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:05:31 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:05:31 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:05:31 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:05:31 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:05:31 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:05:31 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:05:31 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:05:31 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:05:31 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:05:31 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:05:31 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: PUT /api/v1/prompts/1 [request_id=50630db4-ada3-4978-bc82-647e9465c709]
2026-01-19 21:05:35 - app.core.security - ERROR - [security.py:359] - is_token_blacklisted() - 检查令牌黑名单失败: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:05:35 - app.services.system_prompt_service - INFO - [system_prompt_service.py:152] - update_prompt() - 更新提示词成功: prompt_id=1
2026-01-19 21:05:35 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: PUT /api/v1/prompts/1 [request_id=50630db4-ada3-4978-bc82-647e9465c709, status=200]
2026-01-19 21:05:35 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:05:35 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:05:35 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:05:35 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:05:35 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:05:35 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:05:35 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:05:35 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:05:35 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:05:35 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:05:35 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:05:35 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:05:35 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:05:39 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:05:39 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:05:39 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:05:39 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:05:39 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:05:39 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:05:39 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:05:39 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:05:39 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:05:39 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:05:39 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:05:39 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:05:39 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:05:39 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:05:39 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:05:39 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:05:39 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:05:40 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: DELETE /api/v1/prompts/1 [request_id=5b02bdc7-58af-44a1-8795-ad8d6454c63a]
2026-01-19 21:05:44 - app.core.security - ERROR - [security.py:359] - is_token_blacklisted() - 检查令牌黑名单失败: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:05:44 - app.services.system_prompt_service - INFO - [system_prompt_service.py:182] - delete_prompt() - 删除提示词成功: prompt_id=1
2026-01-19 21:05:44 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: DELETE /api/v1/prompts/1 [request_id=5b02bdc7-58af-44a1-8795-ad8d6454c63a, status=204]
2026-01-19 21:05:44 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:05:44 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:05:44 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:05:44 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:05:44 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:05:44 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:05:44 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:05:44 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:05:44 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:05:44 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:05:44 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:05:44 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:05:44 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:05:48 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:05:48 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:05:48 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:05:48 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:05:48 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:05:48 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:05:48 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:05:48 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:05:48 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:05:48 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:05:48 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:05:48 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:05:48 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:05:48 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:05:48 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:05:48 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:05:48 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:05:48 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: DELETE /api/v1/prompts/1 [request_id=bb1c63ee-6752-499a-980c-2e84e6310854]
2026-01-19 21:05:52 - app.core.security - ERROR - [security.py:359] - is_token_blacklisted() - 检查令牌黑名单失败: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:05:52 - app.middleware.error_handler - WARNING - [error_handler.py:151] - http_exception_handler() - HTTPException: 404 - 提示词不存在或无权删除 [request_id=bb1c63ee-6752-499a-980c-2e84e6310854, path=/api/v1/prompts/1]
2026-01-19 21:05:52 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: DELETE /api/v1/prompts/1 [request_id=bb1c63ee-6752-499a-980c-2e84e6310854, status=404]
2026-01-19 21:05:52 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:05:52 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:05:52 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:05:52 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:05:52 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:05:52 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:05:52 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:05:52 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:05:52 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:05:52 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:05:52 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:05:52 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:05:52 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:05:56 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:05:56 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:05:56 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:05:56 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:05:56 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:05:56 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:05:56 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:05:56 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:05:56 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:05:56 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:05:56 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:05:56 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:05:56 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:05:56 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:05:56 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:05:56 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:05:56 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:05:56 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: PUT /api/v1/prompts/1/default [request_id=61193c4a-5e60-4999-960a-4c79c12764b5]
2026-01-19 21:06:00 - app.core.security - ERROR - [security.py:359] - is_token_blacklisted() - 检查令牌黑名单失败: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:06:00 - app.services.system_prompt_service - INFO - [system_prompt_service.py:214] - set_default_prompt() - 设置默认提示词成功: user_id=1, prompt_id=1
2026-01-19 21:06:00 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: PUT /api/v1/prompts/1/default [request_id=61193c4a-5e60-4999-960a-4c79c12764b5, status=200]
2026-01-19 21:06:00 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:06:00 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:06:00 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:06:00 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:06:00 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:06:00 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:06:00 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:06:00 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:06:00 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:06:00 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:06:00 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:06:00 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:06:00 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:06:05 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:06:05 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:06:05 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:06:05 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:06:05 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:06:05 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:06:05 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:06:05 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:06:05 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:06:05 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:06:05 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:06:05 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:06:05 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:06:05 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:06:05 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:06:05 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:06:05 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:06:05 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: GET /api/v1/prompts [request_id=9c8aa1cd-1fac-4db4-b7ef-7b71df3ae979]
2026-01-19 21:06:09 - app.core.security - ERROR - [security.py:359] - is_token_blacklisted() - 检查令牌黑名单失败: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:06:09 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: GET /api/v1/prompts [request_id=9c8aa1cd-1fac-4db4-b7ef-7b71df3ae979, status=200]
2026-01-19 21:06:09 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:06:09 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:06:09 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:06:09 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:06:09 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:06:09 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:06:09 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:06:09 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:06:09 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:06:09 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:06:09 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:06:09 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:06:09 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:06:13 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:06:13 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:06:13 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:06:13 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:06:13 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:06:13 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:06:13 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:06:13 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:06:13 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:06:13 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:06:13 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:06:13 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:06:13 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:06:13 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:06:13 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:06:13 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:06:13 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:06:13 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: GET /api/v1/user/profile [request_id=762a18dd-65f5-42f8-a901-a36189b9dfd7]
2026-01-19 21:06:17 - app.core.security - ERROR - [security.py:359] - is_token_blacklisted() - 检查令牌黑名单失败: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:06:17 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: GET /api/v1/user/profile [request_id=762a18dd-65f5-42f8-a901-a36189b9dfd7, status=200]
2026-01-19 21:06:17 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:06:17 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:06:17 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:06:17 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:06:17 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:06:17 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:06:17 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:06:17 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:06:17 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:06:17 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:06:17 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:06:17 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:06:17 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:06:21 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:06:21 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:06:21 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:06:21 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:06:21 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:06:21 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:06:21 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:06:21 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:06:21 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:06:21 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:06:21 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:06:21 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:06:21 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:06:21 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:06:21 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:06:21 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:06:21 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:06:21 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: PUT /api/v1/user/profile [request_id=ea59bcae-c8cd-498f-a269-b975d1f8407a]
2026-01-19 21:06:26 - app.core.security - ERROR - [security.py:359] - is_token_blacklisted() - 检查令牌黑名单失败: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:06:26 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: PUT /api/v1/user/profile [request_id=ea59bcae-c8cd-498f-a269-b975d1f8407a, status=200]
2026-01-19 21:06:26 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:06:26 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:06:26 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:06:26 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:06:26 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:06:26 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:06:26 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:06:26 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:06:26 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:06:26 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:06:26 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:06:26 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:06:26 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:06:30 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:06:30 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:06:30 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:06:30 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:06:30 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:06:30 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:06:30 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:06:30 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:06:30 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:06:30 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:06:30 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:06:30 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:06:30 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:06:30 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:06:30 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:06:30 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:06:30 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:06:30 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/user/avatar [request_id=e4fc5e10-7276-4717-ad82-f72e082b6d67]
2026-01-19 21:06:34 - app.core.security - ERROR - [security.py:359] - is_token_blacklisted() - 检查令牌黑名单失败: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:06:34 - app.services.file_service - INFO - [file_service.py:157] - save_avatar() - 头像保存成功: user_id=1, file=1_20260119130634_9950d82d.jpg
2026-01-19 21:06:34 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: POST /api/v1/user/avatar [request_id=e4fc5e10-7276-4717-ad82-f72e082b6d67, status=200]
2026-01-19 21:06:34 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:06:34 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:06:34 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:06:34 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:06:34 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:06:34 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:06:34 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:06:34 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:06:34 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:06:34 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:06:34 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:06:34 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:06:34 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:06:38 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:06:38 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:06:38 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:06:38 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:06:38 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:06:38 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:06:38 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:06:38 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:06:38 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:06:38 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:06:38 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:06:38 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:06:38 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:06:38 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:06:38 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:06:38 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:06:38 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:06:38 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/user/avatar [request_id=9fafff5e-c892-48b0-afbb-08b670546704]
2026-01-19 21:06:42 - app.core.security - ERROR - [security.py:359] - is_token_blacklisted() - 检查令牌黑名单失败: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:06:42 - app.middleware.error_handler - WARNING - [error_handler.py:151] - http_exception_handler() - HTTPException: 400 - 不支持的文件格式，允许: .jpeg, .gif, .png, .jpg, .webp [request_id=9fafff5e-c892-48b0-afbb-08b670546704, path=/api/v1/user/avatar]
2026-01-19 21:06:42 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: POST /api/v1/user/avatar [request_id=9fafff5e-c892-48b0-afbb-08b670546704, status=400]
2026-01-19 21:06:42 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:06:42 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:06:42 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:06:42 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:06:42 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:06:42 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:06:42 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:06:42 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:06:42 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:06:42 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:06:42 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:06:42 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:06:42 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:06:46 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:06:46 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:06:46 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:06:46 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:06:46 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:06:46 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:06:46 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:06:46 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:06:46 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:06:46 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:06:46 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:06:46 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:06:46 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:06:46 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:06:46 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:06:46 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:06:46 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:06:47 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/user/avatar [request_id=afee338a-4e47-430b-9269-4654acf5a7c8]
2026-01-19 21:06:51 - app.core.security - ERROR - [security.py:359] - is_token_blacklisted() - 检查令牌黑名单失败: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:06:51 - app.middleware.error_handler - WARNING - [error_handler.py:151] - http_exception_handler() - HTTPException: 400 - 文件大小超过限制（最大2MB） [request_id=afee338a-4e47-430b-9269-4654acf5a7c8, path=/api/v1/user/avatar]
2026-01-19 21:06:51 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: POST /api/v1/user/avatar [request_id=afee338a-4e47-430b-9269-4654acf5a7c8, status=400]
2026-01-19 21:06:51 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:06:51 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:06:51 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:06:51 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:06:51 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:06:51 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:06:51 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:06:51 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:06:51 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:06:51 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:06:51 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:06:51 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:06:51 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:06:55 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:06:55 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:06:55 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:06:55 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:06:55 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:06:55 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:06:55 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:06:55 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:06:55 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:06:55 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:06:55 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:06:55 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:06:55 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:06:55 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:06:55 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:06:55 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:06:55 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:06:55 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: DELETE /api/v1/user/avatar [request_id=66b65b25-5e9c-4823-ba86-b4199f41343b]
2026-01-19 21:06:59 - app.core.security - ERROR - [security.py:359] - is_token_blacklisted() - 检查令牌黑名单失败: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:06:59 - app.services.file_service - INFO - [file_service.py:196] - delete_avatar() - 头像删除成功: user_id=1
2026-01-19 21:06:59 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: DELETE /api/v1/user/avatar [request_id=66b65b25-5e9c-4823-ba86-b4199f41343b, status=200]
2026-01-19 21:06:59 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:06:59 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:06:59 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:06:59 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:06:59 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:06:59 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:06:59 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:06:59 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:06:59 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:06:59 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:06:59 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:06:59 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:06:59 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:07:03 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:07:03 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:07:03 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:07:03 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:07:03 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:07:03 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:07:03 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:07:03 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:07:03 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:07:03 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:07:03 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:07:03 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:07:03 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:07:03 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:07:03 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:07:03 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:07:03 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:07:03 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: GET /api/v1/user/avatar/99999 [request_id=3e7b0a06-be3a-4218-935e-3be097543927]
2026-01-19 21:07:03 - app.middleware.error_handler - WARNING - [error_handler.py:151] - http_exception_handler() - HTTPException: 404 - 头像不存在 [request_id=3e7b0a06-be3a-4218-935e-3be097543927, path=/api/v1/user/avatar/99999]
2026-01-19 21:07:03 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: GET /api/v1/user/avatar/99999 [request_id=3e7b0a06-be3a-4218-935e-3be097543927, status=404]
2026-01-19 21:07:03 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:07:03 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:07:03 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:07:03 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:07:03 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:07:03 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:07:03 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:07:03 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:07:03 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:07:03 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:07:03 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:07:03 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:07:03 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:07:07 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:07:07 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:07:07 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:07:07 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:07:07 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:07:07 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:07:07 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:07:07 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:07:07 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:07:07 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:07:07 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:07:07 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:07:07 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:07:07 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:07:07 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:07:07 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:07:07 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:07:08 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/user/deletion/request [request_id=4ce4c70b-a908-4604-8049-4f15c44e5b36]
2026-01-19 21:07:12 - app.core.security - ERROR - [security.py:359] - is_token_blacklisted() - 检查令牌黑名单失败: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:07:12 - app.services.user_service - INFO - [user_service.py:128] - request_deletion() - 用户 testuser (ID: 1) 请求注销账号，计划于 2026-01-26 13:07:12.409376 执行
2026-01-19 21:07:12 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: POST /api/v1/user/deletion/request [request_id=4ce4c70b-a908-4604-8049-4f15c44e5b36, status=200]
2026-01-19 21:07:12 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:07:12 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:07:12 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:07:12 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:07:12 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:07:12 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:07:12 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:07:12 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:07:12 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:07:12 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:07:12 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:07:12 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:07:12 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:07:16 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:07:16 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:07:16 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:07:16 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:07:16 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:07:16 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:07:16 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:07:16 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:07:16 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:07:16 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:07:16 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:07:16 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:07:16 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:07:16 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:07:16 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:07:16 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:07:16 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:07:16 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/user/deletion/request [request_id=79e94c98-ff84-4c9b-836e-8fb8aebd17cc]
2026-01-19 21:07:20 - app.core.security - ERROR - [security.py:359] - is_token_blacklisted() - 检查令牌黑名单失败: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:07:21 - app.middleware.error_handler - WARNING - [error_handler.py:151] - http_exception_handler() - HTTPException: 400 - 密码不正确 [request_id=79e94c98-ff84-4c9b-836e-8fb8aebd17cc, path=/api/v1/user/deletion/request]
2026-01-19 21:07:21 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: POST /api/v1/user/deletion/request [request_id=79e94c98-ff84-4c9b-836e-8fb8aebd17cc, status=400]
2026-01-19 21:07:21 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:07:21 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:07:21 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:07:21 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:07:21 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:07:21 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:07:21 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:07:21 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:07:21 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:07:21 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:07:21 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:07:21 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:07:21 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:07:25 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:07:25 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:07:25 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:07:25 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:07:25 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:07:25 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:07:25 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:07:25 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:07:25 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:07:25 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:07:25 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:07:25 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:07:25 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:07:25 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:07:25 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:07:25 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:07:25 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:07:25 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/user/deletion/request [request_id=4ad2c931-f63f-40e1-b47d-14ddcabe3ea3]
2026-01-19 21:07:29 - app.core.security - ERROR - [security.py:359] - is_token_blacklisted() - 检查令牌黑名单失败: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:07:29 - app.middleware.error_handler - WARNING - [error_handler.py:151] - http_exception_handler() - HTTPException: 400 - 您已于 2026-01-19 13:07 请求注销账号，计划于 2026-01-26 13:07 执行删除 [request_id=4ad2c931-f63f-40e1-b47d-14ddcabe3ea3, path=/api/v1/user/deletion/request]
2026-01-19 21:07:29 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: POST /api/v1/user/deletion/request [request_id=4ad2c931-f63f-40e1-b47d-14ddcabe3ea3, status=400]
2026-01-19 21:07:29 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:07:29 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:07:29 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:07:29 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:07:29 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:07:29 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:07:29 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:07:29 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:07:29 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:07:29 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:07:29 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:07:29 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:07:29 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:07:33 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:07:33 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:07:33 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:07:33 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:07:33 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:07:33 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:07:33 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:07:33 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:07:33 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:07:33 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:07:33 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:07:33 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:07:33 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:07:33 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:07:33 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:07:33 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:07:33 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:07:33 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/user/deletion/cancel [request_id=e0648a54-b67b-4131-97c7-87649d914aa0]
2026-01-19 21:07:38 - app.core.security - ERROR - [security.py:359] - is_token_blacklisted() - 检查令牌黑名单失败: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:07:38 - app.services.user_service - INFO - [user_service.py:175] - cancel_deletion() - 用户 testuser (ID: 1) 取消了注销请求
2026-01-19 21:07:38 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: POST /api/v1/user/deletion/cancel [request_id=e0648a54-b67b-4131-97c7-87649d914aa0, status=200]
2026-01-19 21:07:38 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:07:38 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:07:38 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:07:38 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:07:38 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:07:38 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:07:38 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:07:38 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:07:38 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:07:38 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:07:38 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:07:38 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:07:38 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:07:42 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:07:42 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:07:42 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:07:42 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:07:42 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:07:42 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:07:42 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:07:42 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:07:42 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:07:42 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:07:42 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:07:42 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:07:42 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:07:42 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:07:42 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:07:42 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:07:42 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:07:42 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/user/deletion/cancel [request_id=cbfbf7f4-a916-45b1-8821-d6e774cb4f3a]
2026-01-19 21:07:46 - app.core.security - ERROR - [security.py:359] - is_token_blacklisted() - 检查令牌黑名单失败: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:07:46 - app.middleware.error_handler - WARNING - [error_handler.py:151] - http_exception_handler() - HTTPException: 400 - 您没有待处理的注销请求 [request_id=cbfbf7f4-a916-45b1-8821-d6e774cb4f3a, path=/api/v1/user/deletion/cancel]
2026-01-19 21:07:46 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: POST /api/v1/user/deletion/cancel [request_id=cbfbf7f4-a916-45b1-8821-d6e774cb4f3a, status=400]
2026-01-19 21:07:46 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:07:46 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:07:46 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:07:46 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:07:46 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:07:46 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:07:46 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:07:46 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:07:46 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:07:46 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:07:46 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:07:46 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:07:46 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:07:50 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:07:50 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:07:50 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:07:50 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:07:50 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:07:50 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:07:50 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:07:50 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:07:50 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:07:50 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:07:50 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:07:50 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:07:50 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:07:50 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:07:50 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:07:50 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:07:50 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:07:50 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/user/deletion/cancel [request_id=bf820cbd-b9bf-4e61-9ece-7ef73314912a]
2026-01-19 21:07:54 - app.core.security - ERROR - [security.py:359] - is_token_blacklisted() - 检查令牌黑名单失败: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:07:54 - app.middleware.error_handler - WARNING - [error_handler.py:151] - http_exception_handler() - HTTPException: 400 - 冷静期已过，无法取消注销请求 [request_id=bf820cbd-b9bf-4e61-9ece-7ef73314912a, path=/api/v1/user/deletion/cancel]
2026-01-19 21:07:54 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: POST /api/v1/user/deletion/cancel [request_id=bf820cbd-b9bf-4e61-9ece-7ef73314912a, status=400]
2026-01-19 21:07:54 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:07:54 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:07:54 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:07:54 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:07:54 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:07:54 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:07:54 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:07:54 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:07:54 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:07:54 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:07:54 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:07:54 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:07:54 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:07:58 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:07:58 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:07:58 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:07:58 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:07:58 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:07:58 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:07:58 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:07:58 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:07:58 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:07:58 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:07:58 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:07:58 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:07:58 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:07:58 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:07:58 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:07:58 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:07:58 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:07:59 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: GET /api/v1/user/deletion/status [request_id=7ea09710-d183-4c51-ae2d-d0322b9102b5]
2026-01-19 21:08:03 - app.core.security - ERROR - [security.py:359] - is_token_blacklisted() - 检查令牌黑名单失败: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:08:03 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: GET /api/v1/user/deletion/status [request_id=7ea09710-d183-4c51-ae2d-d0322b9102b5, status=200]
2026-01-19 21:08:03 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:08:03 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:08:03 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:08:03 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:08:03 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:08:03 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:08:03 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:08:03 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:08:03 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:08:03 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:08:03 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:08:03 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:08:03 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:08:07 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:08:07 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:08:07 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:08:07 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:08:07 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:08:07 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:08:07 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:08:07 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:08:07 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:08:07 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:08:07 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:08:07 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:08:07 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:08:07 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:08:07 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:08:07 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:08:07 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:08:07 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: GET /api/v1/user/deletion/status [request_id=cab10786-2b1d-408c-9550-8df8c516142d]
2026-01-19 21:08:11 - app.core.security - ERROR - [security.py:359] - is_token_blacklisted() - 检查令牌黑名单失败: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2026-01-19 21:08:11 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: GET /api/v1/user/deletion/status [request_id=cab10786-2b1d-408c-9550-8df8c516142d, status=200]
2026-01-19 21:08:11 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:08:11 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:08:11 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:08:11 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:08:11 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:08:11 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:08:11 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:08:11 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:08:11 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:08:11 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:08:11 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:08:11 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:08:11 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:08:15 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:08:15 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:08:15 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:08:15 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:08:15 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:08:15 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:08:15 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:08:15 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:08:15 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:08:15 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:08:15 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:08:15 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:08:15 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:08:15 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:08:15 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:08:15 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:08:15 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:08:15 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/user/deletion/request [request_id=66878e52-0222-426c-a889-19915799fcd1]
2026-01-19 21:08:15 - app.middleware.error_handler - WARNING - [error_handler.py:151] - http_exception_handler() - HTTPException: 401 - 未提供认证令牌 [request_id=66878e52-0222-426c-a889-19915799fcd1, path=/api/v1/user/deletion/request]
2026-01-19 21:08:15 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: POST /api/v1/user/deletion/request [request_id=66878e52-0222-426c-a889-19915799fcd1, status=401]
2026-01-19 21:08:15 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 21:08:15 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 21:08:15 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 21:08:15 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 21:08:15 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 21:08:15 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 21:08:15 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 21:08:15 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 21:08:16 - app.services.user_service - INFO - [user_service.py:128] - request_deletion() - 用户 testuser (ID: 1) 请求注销账号，计划于 2026-01-26 13:08:16.137597 执行
2026-01-19 21:08:16 - app.services.user_service - INFO - [user_service.py:175] - cancel_deletion() - 用户 testuser (ID: 1) 取消了注销请求
2026-01-19 21:08:16 - app.services.file_service - INFO - [file_service.py:196] - delete_avatar() - 头像删除成功: user_id=1
2026-01-19 21:08:16 - app.services.user_service - INFO - [user_service.py:261] - execute_deletion() - 用户 testuser (ID: 1) 的账号已被删除
2026-01-19 21:08:16 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 21:08:16 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 21:08:16 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 21:08:16 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 21:08:16 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 21:08:20 - app.main - WARNING - [main.py:185] - lifespan() - Redis连接失败，某些功能可能不可用
2026-01-19 21:08:20 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 21:08:20 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:08:20 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 21:08:20 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 21:08:20 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 21:08:20 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 21:08:20 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 21:08:20 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 21:08:20 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 21:08:20 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 21:08:20 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 21:08:20 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 21:08:20 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 21:08:20 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 21:08:20 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 21:08:20 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 21:08:21 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/user/deletion/request [request_id=db0a09d5-9611-4859-9f0e-9d3b32be0d33]
2026-01-19 22:25:42 - root - INFO - [logger.py:113] - setup_logging() - ================================================================================
2026-01-19 22:25:42 - root - INFO - [logger.py:114] - setup_logging() - 日志系统初始化完成
2026-01-19 22:25:42 - root - INFO - [logger.py:115] - setup_logging() - 日志级别: INFO
2026-01-19 22:25:42 - root - INFO - [logger.py:116] - setup_logging() - 日志文件: ./logs/app.log
2026-01-19 22:25:42 - root - INFO - [logger.py:117] - setup_logging() - 日志文件最大大小: 10.00MB
2026-01-19 22:25:42 - root - INFO - [logger.py:118] - setup_logging() - 日志备份数量: 10
2026-01-19 22:25:42 - root - INFO - [logger.py:119] - setup_logging() - ================================================================================
2026-01-19 22:25:42 - app.middleware.error_handler - INFO - [error_handler.py:266] - register_exception_handlers() - 异常处理器已注册
2026-01-19 22:25:42 - app.middleware.rate_limiter - INFO - [rate_limiter.py:181] - register_rate_limiter() - 速率限制器已注册 - 登录: 5/min, API: 100/min, LLM: 20/min
2026-01-19 22:25:43 - app.core.llm - INFO - [llm.py:360] - clear_llm_cache() - LLM实例缓存已清除
2026-01-19 22:25:43 - app.core.llm - INFO - [llm.py:102] - _create_llm() - 创建通义千问LLM实例: model=qwen-turbo, temperature=0.7, max_tokens=2000, streaming=True
2026-01-19 22:25:43 - app.core.llm - WARNING - [llm.py:111] - _create_llm() - 检测到占位 DashScope API Key，已启用开发模式 Mock LLM（仅用于本地调试）。
2026-01-19 22:26:51 - root - INFO - [logger.py:113] - setup_logging() - ================================================================================
2026-01-19 22:26:51 - root - INFO - [logger.py:114] - setup_logging() - 日志系统初始化完成
2026-01-19 22:26:51 - root - INFO - [logger.py:115] - setup_logging() - 日志级别: INFO
2026-01-19 22:26:51 - root - INFO - [logger.py:116] - setup_logging() - 日志文件: ./logs/app.log
2026-01-19 22:26:51 - root - INFO - [logger.py:117] - setup_logging() - 日志文件最大大小: 10.00MB
2026-01-19 22:26:51 - root - INFO - [logger.py:118] - setup_logging() - 日志备份数量: 10
2026-01-19 22:26:51 - root - INFO - [logger.py:119] - setup_logging() - ================================================================================
2026-01-19 22:26:51 - app.middleware.error_handler - INFO - [error_handler.py:266] - register_exception_handlers() - 异常处理器已注册
2026-01-19 22:26:51 - app.middleware.rate_limiter - INFO - [rate_limiter.py:181] - register_rate_limiter() - 速率限制器已注册 - 登录: 5/min, API: 100/min, LLM: 20/min
2026-01-19 22:26:52 - app.main - INFO - [main.py:155] - lifespan() - ============================================================
2026-01-19 22:26:52 - app.main - INFO - [main.py:156] - lifespan() - 启动 AI智能助手系统 v0.1.0
2026-01-19 22:26:52 - app.main - INFO - [main.py:157] - lifespan() - 环境: development
2026-01-19 22:26:52 - app.main - INFO - [main.py:158] - lifespan() - 调试模式: False
2026-01-19 22:26:52 - app.main - INFO - [main.py:159] - lifespan() - ============================================================
2026-01-19 22:26:52 - app.main - INFO - [main.py:183] - lifespan() - Redis连接成功
2026-01-19 22:26:52 - app.main - INFO - [main.py:194] - lifespan() - 向量数据库初始化成功: ./data/chroma
2026-01-19 22:26:52 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 22:26:52 - app.main - INFO - [main.py:92] - setup_scheduler() - 已添加配额重置任务: 0 0 1 * *
2026-01-19 22:26:52 - apscheduler.scheduler - INFO - [base.py:454] - add_job() - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-01-19 22:26:52 - app.main - INFO - [main.py:116] - setup_scheduler() - 已添加清理任务: 每天凌晨2点
2026-01-19 22:26:52 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "重置月度配额" to job store "default"
2026-01-19 22:26:52 - apscheduler.scheduler - INFO - [base.py:895] - _real_add_job() - Added job "运行所有清理任务" to job store "default"
2026-01-19 22:26:52 - apscheduler.scheduler - INFO - [base.py:181] - start() - Scheduler started
2026-01-19 22:26:52 - app.main - INFO - [main.py:203] - lifespan() - 定时任务调度器已启动
2026-01-19 22:26:52 - app.main - INFO - [main.py:208] - lifespan() - 已注册 2 个定时任务:
2026-01-19 22:26:52 - app.main - INFO - [main.py:210] - lifespan() -   - 运行所有清理任务 (ID: run_all_cleanup_tasks)
2026-01-19 22:26:52 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-01-20 02:00:00+00:00
2026-01-19 22:26:52 - app.main - INFO - [main.py:210] - lifespan() -   - 重置月度配额 (ID: reset_monthly_quotas)
2026-01-19 22:26:52 - app.main - INFO - [main.py:211] - lifespan() -     下次执行: 2026-02-01 00:00:00+00:00
2026-01-19 22:26:52 - app.main - INFO - [main.py:220] - lifespan() - 应用启动完成
2026-01-19 22:26:52 - app.main - INFO - [main.py:221] - lifespan() - ============================================================
2026-01-19 22:26:52 - app.core.llm - INFO - [llm.py:360] - clear_llm_cache() - LLM实例缓存已清除
2026-01-19 22:26:52 - app.middleware.request_id - INFO - [request_id.py:60] - dispatch() - Request started: POST /api/v1/chat/stream [request_id=524dbe27-7747-421a-8606-bfb1ae038617]
2026-01-19 22:26:52 - app.api.v1.chat - INFO - [chat.py:282] - stream_chat() - 自动创建新对话: 1
2026-01-19 22:26:52 - app.core.llm - INFO - [llm.py:102] - _create_llm() - 创建通义千问LLM实例: model=qwen-turbo, temperature=0.3, max_tokens=50, streaming=False
2026-01-19 22:26:52 - app.core.llm - WARNING - [llm.py:111] - _create_llm() - 检测到占位 DashScope API Key，已启用开发模式 Mock LLM（仅用于本地调试）。
2026-01-19 22:26:52 - app.services.conversation_service - INFO - [conversation_service.py:634] - generate_title_sync() - 生成对话标题: （开发模式模拟回复：未配置 DashS…
2026-01-19 22:26:52 - app.api.v1.chat - INFO - [chat.py:320] - stream_chat() - 自动生成对话标题: （开发模式模拟回复：未配置 DashS…
2026-01-19 22:26:52 - app.middleware.request_id - INFO - [request_id.py:73] - dispatch() - Request completed: POST /api/v1/chat/stream [request_id=524dbe27-7747-421a-8606-bfb1ae038617, status=200]
2026-01-19 22:26:52 - app.core.llm - INFO - [llm.py:102] - _create_llm() - 创建通义千问LLM实例: model=qwen-turbo, temperature=0.7, max_tokens=2000, streaming=True
2026-01-19 22:26:52 - app.core.llm - WARNING - [llm.py:111] - _create_llm() - 检测到占位 DashScope API Key，已启用开发模式 Mock LLM（仅用于本地调试）。
2026-01-19 22:26:52 - app.api.v1.chat - ERROR - [chat.py:389] - generate_stream() - 保存AI回复失败: (pymysql.err.OperationalError) (1045, "Access denied for user 'user'@'172.18.0.1' (using password: YES)")
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-19 22:26:52 - app.main - INFO - [main.py:226] - lifespan() - ============================================================
2026-01-19 22:26:52 - app.main - INFO - [main.py:227] - lifespan() - 正在关闭应用...
2026-01-19 22:26:52 - app.main - INFO - [main.py:233] - lifespan() - 定时任务调度器已关闭
2026-01-19 22:26:52 - app.main - INFO - [main.py:242] - lifespan() - Redis连接已关闭
2026-01-19 22:26:52 - app.main - INFO - [main.py:251] - lifespan() - 数据库连接已关闭
2026-01-19 22:26:52 - app.main - INFO - [main.py:255] - lifespan() - 应用已关闭
2026-01-19 22:26:52 - app.main - INFO - [main.py:256] - lifespan() - ============================================================
2026-01-19 22:26:52 - apscheduler.scheduler - INFO - [base.py:212] - shutdown() - Scheduler has been shut down
2026-01-19 23:01:22 - root - INFO - [logger.py:113] - setup_logging() - ================================================================================
2026-01-19 23:01:22 - root - INFO - [logger.py:114] - setup_logging() - 日志系统初始化完成
2026-01-19 23:01:22 - root - INFO - [logger.py:115] - setup_logging() - 日志级别: INFO
2026-01-19 23:01:22 - root - INFO - [logger.py:116] - setup_logging() - 日志文件: ./logs/app.log
2026-01-19 23:01:22 - root - INFO - [logger.py:117] - setup_logging() - 日志文件最大大小: 10.00MB
2026-01-19 23:01:22 - root - INFO - [logger.py:118] - setup_logging() - 日志备份数量: 10
2026-01-19 23:01:22 - root - INFO - [logger.py:119] - setup_logging() - ================================================================================
2026-01-19 23:01:22 - app.middleware.error_handler - INFO - [error_handler.py:266] - register_exception_handlers() - 异常处理器已注册
2026-01-19 23:01:22 - app.middleware.rate_limiter - INFO - [rate_limiter.py:181] - register_rate_limiter() - 速率限制器已注册 - 登录: 5/min, API: 100/min, LLM: 20/min
2026-01-19 23:01:23 - app.langchain_integration.document_loaders - INFO - [document_loaders.py:256] - load_document() - 文档加载成功: path=C:\Users\Administrator\AppData\Local\Temp\pytest-of-Administrator\pytest-10\test_text_loader_decodes_gbk0\sample.txt, type=txt, pages=1
2026-01-19 23:01:27 - app.langchain_integration.document_loaders - WARNING - [document_loaders.py:86] - load() - Markdown结构化解析失败，降级为纯文本加载: error='utf-8' codec can't decode byte 0xb1 in position 2: invalid start byte
2026-01-19 23:01:27 - app.langchain_integration.document_loaders - INFO - [document_loaders.py:256] - load_document() - 文档加载成功: path=C:\Users\Administrator\AppData\Local\Temp\pytest-of-Administrator\pytest-10\test_markdown_loader_falls_bac0\sample.md, type=md, pages=1
2026-01-19 23:01:27 - app.core.vector_store - INFO - [vector_store.py:101] - _ensure_directory_exists() - 创建向量数据库目录: C:\Users\Administrator\AppData\Local\Temp\pytest-of-Administrator\pytest-10\test_vector_store_uses_mock_em0\chroma
2026-01-19 23:01:27 - app.core.vector_store - WARNING - [vector_store.py:125] - _create_embeddings() - 检测到占位 DashScope API Key，已启用开发模式 Mock Embeddings（仅用于本地调试）。
