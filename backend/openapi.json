{
  "openapi": "3.1.0",
  "info": {
    "title": "AI智能助手系统",
    "summary": "AI智能助手系统API",
    "description": "\n## AI智能助手系统后端API\n\n基于FastAPI和LangChain 1.0框架构建的企业级AI智能助手系统，提供以下核心功能：\n\n### 核心功能\n\n* **智能对话** - 支持多轮对话、流式响应、对话历史管理\n* **RAG知识库** - 文档上传、向量化、智能检索问答\n* **Agent智能代理** - 工具调用、任务执行、推理过程可视化\n* **用户管理** - 注册登录、JWT认证、配额管理\n* **系统监控** - 使用统计、健康检查、Prometheus指标\n\n### 技术栈\n\n* **Web框架**: FastAPI 0.104+\n* **AI框架**: LangChain 1.0\n* **数据库**: MySQL 8.0, Redis 7.0, Chroma\n* **LLM**: 通义千问 (Tongyi Qianwen)\n\n### 认证方式\n\n大部分API端点需要JWT认证。在请求头中添加：\n```\nAuthorization: Bearer <access_token>\n```\n\n### 速率限制\n\n* 登录接口: 5次/分钟\n* 普通API: 100次/分钟\n* LLM调用: 20次/分钟\n\n### 错误响应格式\n\n所有错误响应遵循统一格式：\n```json\n{\n    \"error_code\": \"1001\",\n    \"message\": \"错误描述\",\n    \"request_id\": \"uuid\"\n}\n```\n    ",
    "termsOfService": "https://example.com/terms/",
    "contact": {
      "name": "API Support",
      "url": "https://example.com/support",
      "email": "support@example.com"
    },
    "license": {
      "name": "MIT License",
      "url": "https://opensource.org/licenses/MIT"
    },
    "version": "0.1.0"
  },
  "paths": {
    "/api/v1/auth/register": {
      "post": {
        "tags": [
          "认证"
        ],
        "summary": "用户注册",
        "description": "创建新用户账户。用户名必须唯一，密码至少8位且包含字母和数字。",
        "operationId": "register_api_v1_auth_register_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserRegister"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/login": {
      "post": {
        "tags": [
          "认证"
        ],
        "summary": "用户登录",
        "description": "验证用户凭证并返回JWT令牌。连续5次登录失败将锁定账户15分钟。",
        "operationId": "login_api_v1_auth_login_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserLogin"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TokenResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/refresh": {
      "post": {
        "tags": [
          "认证"
        ],
        "summary": "刷新令牌",
        "description": "使用刷新令牌获取新的访问令牌。",
        "operationId": "refresh_token_api_v1_auth_refresh_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RefreshTokenRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TokenResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/password": {
      "put": {
        "tags": [
          "认证"
        ],
        "summary": "修改密码",
        "description": "修改当前用户的密码。需要提供正确的旧密码。",
        "operationId": "change_password_api_v1_auth_password_put",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PasswordChangeRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/app__schemas__auth__MessageResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/conversations": {
      "post": {
        "tags": [
          "对话管理"
        ],
        "summary": "创建对话",
        "description": "创建新的对话会话，返回对话ID和基本信息。",
        "operationId": "create_conversation_api_v1_conversations_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ConversationCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConversationResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "对话管理"
        ],
        "summary": "获取对话列表",
        "description": "获取当前用户的对话列表，按更新时间倒序排列，支持分页。",
        "operationId": "get_conversations_api_v1_conversations_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "跳过的记录数",
              "default": 0,
              "title": "Skip"
            },
            "description": "跳过的记录数"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "返回的最大记录数",
              "default": 20,
              "title": "Limit"
            },
            "description": "返回的最大记录数"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConversationListResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/conversations/{conversation_id}": {
      "get": {
        "tags": [
          "对话管理"
        ],
        "summary": "获取对话详情",
        "description": "获取指定对话的详细信息，包括所有消息。",
        "operationId": "get_conversation_api_v1_conversations__conversation_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "conversation_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Conversation Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConversationDetailResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "对话管理"
        ],
        "summary": "更新对话",
        "description": "更新对话标题。",
        "operationId": "update_conversation_api_v1_conversations__conversation_id__put",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "conversation_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Conversation Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ConversationUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConversationResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "对话管理"
        ],
        "summary": "删除对话",
        "description": "软删除对话，将is_deleted标记为true。",
        "operationId": "delete_conversation_api_v1_conversations__conversation_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "conversation_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Conversation Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeleteResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/conversations/{conversation_id}/messages": {
      "get": {
        "tags": [
          "对话管理"
        ],
        "summary": "获取对话消息",
        "description": "获取指定对话的所有消息，按时间正序排列。",
        "operationId": "get_messages_api_v1_conversations__conversation_id__messages_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "conversation_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Conversation Id"
            }
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "跳过的记录数",
              "default": 0,
              "title": "Skip"
            },
            "description": "跳过的记录数"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 1000,
                  "minimum": 1
                },
                {
                  "type": "null"
                }
              ],
              "description": "返回的最大记录数",
              "title": "Limit"
            },
            "description": "返回的最大记录数"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/app__schemas__conversation__MessageResponse"
                  },
                  "title": "Response Get Messages Api V1 Conversations  Conversation Id  Messages Get"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/conversations/{conversation_id}/export": {
      "get": {
        "tags": [
          "对话管理"
        ],
        "summary": "导出对话",
        "description": "导出对话内容为Markdown或JSON格式。",
        "operationId": "export_conversation_api_v1_conversations__conversation_id__export_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "conversation_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Conversation Id"
            }
          },
          {
            "name": "format",
            "in": "query",
            "required": false,
            "schema": {
              "$ref": "#/components/schemas/ExportFormatEnum",
              "description": "导出格式",
              "default": "markdown"
            },
            "description": "导出格式"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExportResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/conversations/{conversation_id}/generate-title": {
      "post": {
        "tags": [
          "对话管理"
        ],
        "summary": "生成对话标题",
        "description": "使用LLM根据消息内容生成对话标题。",
        "operationId": "generate_title_api_v1_conversations__conversation_id__generate_title_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "conversation_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Conversation Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TitleGenerateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TitleGenerateResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/chat": {
      "post": {
        "tags": [
          "聊天"
        ],
        "summary": "发送消息（非流式）",
        "description": "发送消息到对话，返回AI回复。",
        "operationId": "chat_api_v1_chat_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChatResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/chat/stream": {
      "post": {
        "tags": [
          "聊天"
        ],
        "summary": "发送消息（流式）",
        "description": "发送消息到对话，使用SSE协议流式返回AI回复。",
        "operationId": "stream_chat_api_v1_chat_stream_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/quota": {
      "get": {
        "tags": [
          "配额管理"
        ],
        "summary": "获取配额信息",
        "description": "获取当前用户的配额使用情况。",
        "operationId": "get_quota_api_v1_quota_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QuotaResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "put": {
        "tags": [
          "配额管理"
        ],
        "summary": "更新用户配额（管理员）",
        "description": "管理员更新指定用户的月度配额上限。",
        "operationId": "update_quota_api_v1_quota_put",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/QuotaUpdateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QuotaUpdateResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/quota/reset": {
      "post": {
        "tags": [
          "配额管理"
        ],
        "summary": "重置配额（管理员）",
        "description": "管理员重置指定用户的配额。",
        "operationId": "reset_quota_api_v1_quota_reset_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QuotaResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/knowledge-bases": {
      "post": {
        "tags": [
          "知识库管理"
        ],
        "summary": "创建知识库",
        "description": "创建新的知识库，用于存储和管理文档。",
        "operationId": "create_knowledge_base_api_v1_knowledge_bases_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/KnowledgeBaseCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/KnowledgeBaseResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "知识库管理"
        ],
        "summary": "获取知识库列表",
        "description": "获取当前用户的所有知识库列表，支持分页。",
        "operationId": "get_knowledge_bases_api_v1_knowledge_bases_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/KnowledgeBaseListResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/knowledge-bases/{kb_id}": {
      "get": {
        "tags": [
          "知识库管理"
        ],
        "summary": "获取知识库详情",
        "description": "获取指定知识库的详细信息。",
        "operationId": "get_knowledge_base_api_v1_knowledge_bases__kb_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "kb_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Kb Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/KnowledgeBaseResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "知识库管理"
        ],
        "summary": "更新知识库",
        "description": "更新指定知识库的信息。",
        "operationId": "update_knowledge_base_api_v1_knowledge_bases__kb_id__put",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "kb_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Kb Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/KnowledgeBaseUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/KnowledgeBaseResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "知识库管理"
        ],
        "summary": "删除知识库",
        "description": "删除指定知识库及其所有文档和向量数据。",
        "operationId": "delete_knowledge_base_api_v1_knowledge_bases__kb_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "kb_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Kb Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/documents/upload": {
      "post": {
        "tags": [
          "文档管理"
        ],
        "summary": "上传文档",
        "description": "上传单个文档到指定知识库。支持PDF、Word、TXT、Markdown格式，最大10MB。",
        "operationId": "upload_document_api_v1_documents_upload_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "knowledge_base_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Knowledge Base Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_upload_document_api_v1_documents_upload_post"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DocumentUploadResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/documents/upload-batch": {
      "post": {
        "tags": [
          "文档管理"
        ],
        "summary": "批量上传文档",
        "description": "批量上传多个文档到指定知识库。",
        "operationId": "upload_documents_batch_api_v1_documents_upload_batch_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "knowledge_base_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Knowledge Base Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_upload_documents_batch_api_v1_documents_upload_batch_post"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BatchUploadResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/documents": {
      "get": {
        "tags": [
          "文档管理"
        ],
        "summary": "获取文档列表",
        "description": "获取指定知识库的文档列表，支持分页。",
        "operationId": "get_documents_api_v1_documents_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "knowledge_base_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Knowledge Base Id"
            }
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DocumentListResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/documents/{document_id}/status": {
      "get": {
        "tags": [
          "文档管理"
        ],
        "summary": "获取文档处理状态",
        "description": "获取指定文档的处理状态和进度。",
        "operationId": "get_document_status_api_v1_documents__document_id__status_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "document_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Document Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DocumentStatusResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/documents/{document_id}/preview": {
      "get": {
        "tags": [
          "文档管理"
        ],
        "summary": "获取文档预览",
        "description": "获取文档的前1000个字符的文本内容预览。",
        "operationId": "get_document_preview_api_v1_documents__document_id__preview_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "document_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Document Id"
            }
          },
          {
            "name": "max_chars",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1000,
              "title": "Max Chars"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DocumentPreviewResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/documents/{document_id}": {
      "delete": {
        "tags": [
          "文档管理"
        ],
        "summary": "删除文档",
        "description": "删除指定文档及其向量数据。",
        "operationId": "delete_document_api_v1_documents__document_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "document_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Document Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/rag/query": {
      "post": {
        "tags": [
          "RAG问答"
        ],
        "summary": "RAG问答",
        "description": "基于知识库进行智能问答，支持单个或多个知识库联合检索。",
        "operationId": "rag_query_api_v1_rag_query_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RAGQueryRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RAGQueryResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/rag/query/stream": {
      "post": {
        "tags": [
          "RAG问答"
        ],
        "summary": "RAG流式问答",
        "description": "基于知识库进行流式智能问答，实时返回生成的答案。",
        "operationId": "rag_query_stream_api_v1_rag_query_stream_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RAGQueryRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/agent/tools": {
      "get": {
        "tags": [
          "Agent智能代理"
        ],
        "summary": "获取工具列表",
        "description": "获取所有可用的Agent工具，包括内置工具和自定义工具。",
        "operationId": "get_tools_api_v1_agent_tools_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "跳过的记录数",
              "default": 0,
              "title": "Skip"
            },
            "description": "跳过的记录数"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "description": "返回的最大记录数",
              "default": 100,
              "title": "Limit"
            },
            "description": "返回的最大记录数"
          },
          {
            "name": "tool_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "工具类型过滤（builtin/custom）",
              "title": "Tool Type"
            },
            "description": "工具类型过滤（builtin/custom）"
          },
          {
            "name": "is_enabled",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "description": "启用状态过滤",
              "title": "Is Enabled"
            },
            "description": "启用状态过滤"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ToolListResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Agent智能代理"
        ],
        "summary": "创建自定义工具",
        "description": "创建新的自定义工具，提供工具名称、描述和配置参数。",
        "operationId": "create_tool_api_v1_agent_tools_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ToolCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ToolResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/agent/tools/{tool_id}": {
      "get": {
        "tags": [
          "Agent智能代理"
        ],
        "summary": "获取工具详情",
        "description": "获取指定工具的详细信息。",
        "operationId": "get_tool_api_v1_agent_tools__tool_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "tool_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Tool Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ToolResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Agent智能代理"
        ],
        "summary": "更新工具配置",
        "description": "更新工具的名称、描述、配置参数或启用状态。",
        "operationId": "update_tool_api_v1_agent_tools__tool_id__put",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "tool_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Tool Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ToolUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ToolResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Agent智能代理"
        ],
        "summary": "删除工具",
        "description": "删除自定义工具（不能删除内置工具）。",
        "operationId": "delete_tool_api_v1_agent_tools__tool_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "tool_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Tool Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/app__schemas__agent__DeleteResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/agent/execute": {
      "post": {
        "tags": [
          "Agent智能代理"
        ],
        "summary": "执行Agent任务",
        "description": "提交任务给Agent执行，Agent将使用ReAct模式分析任务并调用工具完成任务。",
        "operationId": "execute_task_api_v1_agent_execute_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TaskExecuteRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExecutionResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/agent/execute/stream": {
      "post": {
        "tags": [
          "Agent智能代理"
        ],
        "summary": "流式执行Agent任务",
        "description": "流式执行Agent任务，实时返回执行步骤和结果。",
        "operationId": "stream_execute_task_api_v1_agent_execute_stream_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TaskExecuteRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/agent/executions": {
      "get": {
        "tags": [
          "Agent智能代理"
        ],
        "summary": "获取执行历史",
        "description": "获取当前用户的Agent任务执行历史，按创建时间倒序排列。",
        "operationId": "get_executions_api_v1_agent_executions_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "跳过的记录数",
              "default": 0,
              "title": "Skip"
            },
            "description": "跳过的记录数"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "返回的最大记录数",
              "default": 20,
              "title": "Limit"
            },
            "description": "返回的最大记录数"
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "状态过滤（pending/running/completed/failed）",
              "title": "Status"
            },
            "description": "状态过滤（pending/running/completed/failed）"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExecutionListResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/agent/executions/{execution_id}": {
      "get": {
        "tags": [
          "Agent智能代理"
        ],
        "summary": "获取执行详情",
        "description": "获取指定执行记录的详细信息，包括所有执行步骤。",
        "operationId": "get_execution_api_v1_agent_executions__execution_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "execution_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Execution Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExecutionResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/config": {
      "get": {
        "tags": [
          "系统管理"
        ],
        "summary": "获取系统配置（管理员）",
        "description": "获取系统配置信息，敏感字段已脱敏。需要管理员权限。",
        "operationId": "get_system_config_api_v1_system_config_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SystemConfigResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "put": {
        "tags": [
          "系统管理"
        ],
        "summary": "更新系统配置（管理员）",
        "description": "更新系统配置项。需要管理员权限。",
        "operationId": "update_system_config_api_v1_system_config_put",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SystemConfigUpdateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SystemConfigResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/system/stats": {
      "get": {
        "tags": [
          "系统管理"
        ],
        "summary": "获取使用统计",
        "description": "获取系统或用户的使用统计信息。管理员可查看所有用户统计，普通用户只能查看自己的统计。",
        "operationId": "get_usage_stats_api_v1_system_stats_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "description": "用户ID（管理员可指定，普通用户自动使用当前用户）",
              "title": "User Id"
            },
            "description": "用户ID（管理员可指定，普通用户自动使用当前用户）"
          },
          {
            "name": "start_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "description": "开始日期（默认为当月1日）",
              "title": "Start Date"
            },
            "description": "开始日期（默认为当月1日）"
          },
          {
            "name": "end_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "description": "结束日期（默认为今天）",
              "title": "End Date"
            },
            "description": "结束日期（默认为今天）"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UsageStatsResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/stats/all": {
      "get": {
        "tags": [
          "系统管理"
        ],
        "summary": "获取全局使用统计（管理员）",
        "description": "获取所有用户的使用统计信息。需要管理员权限。",
        "operationId": "get_all_usage_stats_api_v1_system_stats_all_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "start_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "description": "开始日期（默认为当月1日）",
              "title": "Start Date"
            },
            "description": "开始日期（默认为当月1日）"
          },
          {
            "name": "end_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "description": "结束日期（默认为今天）",
              "title": "End Date"
            },
            "description": "结束日期（默认为今天）"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UsageStatsResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/health": {
      "get": {
        "tags": [
          "系统管理"
        ],
        "summary": "系统健康检查",
        "description": "检查系统各组件的健康状态。无需认证。",
        "operationId": "health_check_api_v1_system_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthCheckResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/info": {
      "get": {
        "tags": [
          "系统管理"
        ],
        "summary": "获取系统信息",
        "description": "获取系统的基本信息和运行状态。",
        "operationId": "get_system_info_api_v1_system_info_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SystemInfoResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/": {
      "get": {
        "tags": [
          "根路径"
        ],
        "summary": "Root",
        "description": "API根路径\n\n返回API基本信息和可用端点链接。\n\nReturns:\n    dict: API基本信息",
        "operationId": "root__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "tags": [
          "监控"
        ],
        "summary": "Health Check",
        "description": "健康检查端点\n\n检查应用运行状态和各组件健康状况。\n\nReturns:\n    dict: 健康状态信息，包括应用状态、调度器状态等\n    \nExample:\n    ```json\n    {\n        \"status\": \"healthy\",\n        \"app_name\": \"AI智能助手系统\",\n        \"version\": \"1.0.0\",\n        \"environment\": \"development\",\n        \"scheduler\": \"running\",\n        \"scheduled_jobs\": 2\n    }\n    ```",
        "operationId": "health_check_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          }
        }
      }
    },
    "/scheduler/jobs": {
      "get": {
        "tags": [
          "监控"
        ],
        "summary": "List Scheduled Jobs",
        "description": "列出所有定时任务\n\n显示系统中配置的所有定时任务及其执行状态。\n\nReturns:\n    dict: 定时任务列表，包括任务ID、名称、下次执行时间等\n    \nExample:\n    ```json\n    {\n        \"enabled\": true,\n        \"running\": true,\n        \"job_count\": 2,\n        \"jobs\": [\n            {\n                \"id\": \"reset_monthly_quotas\",\n                \"name\": \"重置月度配额\",\n                \"next_run_time\": \"2025-02-01T00:00:00\",\n                \"trigger\": \"cron[month='*', day='1', hour='0', minute='0']\"\n            }\n        ]\n    }\n    ```",
        "operationId": "list_scheduled_jobs_scheduler_jobs_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          }
        }
      }
    },
    "/metrics": {
      "get": {
        "tags": [
          "监控"
        ],
        "summary": "Metrics",
        "description": "Prometheus监控指标端点\n\n返回Prometheus格式的监控指标，用于系统监控和告警。\n\n**可用指标:**\n\n* `http_requests_total` - HTTP请求总数（按方法、路径、状态码分组）\n* `http_request_duration_seconds` - HTTP请求时长分布\n* `http_requests_active` - 当前活跃的HTTP请求数\n* `llm_calls_total` - LLM调用总数（按模型分组）\n* `llm_tokens_total` - LLM token使用总量（按类型分组）\n* `db_connections_active` - 数据库活跃连接数\n* `redis_connection_status` - Redis连接状态\n\n需求引用:\n    - 需求8.1: 提供监控指标接口\n\nReturns:\n    Response: Prometheus格式的指标数据（text/plain格式）\n    \nExample:\n    ```\n    # HELP http_requests_total Total HTTP requests\n    # TYPE http_requests_total counter\n    http_requests_total{method=\"GET\",path=\"/api/v1/conversations\",status=\"200\"} 1523.0\n    \n    # HELP http_request_duration_seconds HTTP request duration\n    # TYPE http_request_duration_seconds histogram\n    http_request_duration_seconds_bucket{le=\"0.1\"} 1234.0\n    ```",
        "operationId": "metrics_metrics_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "参数验证失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "401": {
            "description": "未授权 - JWT令牌无效或已过期",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "1002",
                  "message": "令牌已过期",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "403": {
            "description": "禁止访问 - 配额不足或权限不足",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "4001",
                  "message": "配额已用尽",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "404": {
            "description": "资源不存在",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "2001",
                  "message": "对话不存在",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          },
          "429": {
            "description": "请求过于频繁 - 超出速率限制",
            "content": {
              "application/json": {
                "example": {
                  "error": "Rate limit exceeded",
                  "message": "请求过于频繁，请稍后再试"
                }
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "example": {
                  "error_code": "3001",
                  "message": "数据库连接失败",
                  "request_id": "550e8400-e29b-41d4-a716-446655440000"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "APITypeStats": {
        "properties": {
          "api_type": {
            "type": "string",
            "title": "Api Type",
            "description": "API类型"
          },
          "call_count": {
            "type": "integer",
            "title": "Call Count",
            "description": "调用次数"
          },
          "total_tokens": {
            "type": "integer",
            "title": "Total Tokens",
            "description": "总token消耗"
          }
        },
        "type": "object",
        "required": [
          "api_type",
          "call_count",
          "total_tokens"
        ],
        "title": "APITypeStats",
        "description": "API类型统计"
      },
      "AgentStep": {
        "properties": {
          "step_number": {
            "type": "integer",
            "title": "Step Number",
            "description": "步骤编号"
          },
          "thought": {
            "type": "string",
            "title": "Thought",
            "description": "思考过程"
          },
          "action": {
            "type": "string",
            "title": "Action",
            "description": "执行的动作/工具"
          },
          "action_input": {
            "additionalProperties": true,
            "type": "object",
            "title": "Action Input",
            "description": "动作输入参数"
          },
          "observation": {
            "type": "string",
            "title": "Observation",
            "description": "观察结果"
          },
          "timestamp": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Timestamp",
            "description": "时间戳"
          }
        },
        "type": "object",
        "required": [
          "step_number",
          "thought",
          "action",
          "action_input",
          "observation"
        ],
        "title": "AgentStep",
        "description": "Agent执行步骤模型"
      },
      "BatchUploadResponse": {
        "properties": {
          "documents": {
            "items": {
              "$ref": "#/components/schemas/DocumentUploadResponse"
            },
            "type": "array",
            "title": "Documents",
            "description": "上传成功的文档列表"
          },
          "errors": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Errors",
            "description": "上传失败的文件列表"
          }
        },
        "type": "object",
        "required": [
          "documents"
        ],
        "title": "BatchUploadResponse",
        "description": "批量上传响应"
      },
      "Body_upload_document_api_v1_documents_upload_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File",
            "description": "要上传的文档文件"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_upload_document_api_v1_documents_upload_post"
      },
      "Body_upload_documents_batch_api_v1_documents_upload_batch_post": {
        "properties": {
          "files": {
            "items": {
              "type": "string",
              "format": "binary"
            },
            "type": "array",
            "title": "Files",
            "description": "要上传的文档文件列表"
          }
        },
        "type": "object",
        "required": [
          "files"
        ],
        "title": "Body_upload_documents_batch_api_v1_documents_upload_batch_post"
      },
      "ChatConfig": {
        "properties": {
          "temperature": {
            "type": "number",
            "maximum": 2.0,
            "minimum": 0.0,
            "title": "Temperature",
            "description": "温度参数，控制输出随机性",
            "default": 0.7
          },
          "max_tokens": {
            "type": "integer",
            "maximum": 4000.0,
            "minimum": 1.0,
            "title": "Max Tokens",
            "description": "最大输出token数",
            "default": 2000
          },
          "mode": {
            "$ref": "#/components/schemas/ChatModeEnum",
            "description": "对话模式",
            "default": "normal"
          }
        },
        "type": "object",
        "title": "ChatConfig",
        "description": "对话配置模型\n\n用于配置对话的模型参数。"
      },
      "ChatModeEnum": {
        "type": "string",
        "enum": [
          "normal",
          "professional",
          "creative"
        ],
        "title": "ChatModeEnum",
        "description": "对话模式枚举"
      },
      "ChatRequest": {
        "properties": {
          "conversation_id": {
            "type": "integer",
            "title": "Conversation Id",
            "description": "对话ID",
            "examples": [
              1,
              42
            ]
          },
          "content": {
            "type": "string",
            "maxLength": 10000,
            "minLength": 1,
            "title": "Content",
            "description": "消息内容",
            "examples": [
              "你好，请介绍一下Python",
              "什么是机器学习？"
            ]
          },
          "config": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ChatConfig"
              },
              {
                "type": "null"
              }
            ],
            "description": "对话配置"
          }
        },
        "type": "object",
        "required": [
          "conversation_id",
          "content"
        ],
        "title": "ChatRequest",
        "description": "聊天请求模型\n\n用于发送消息到对话。",
        "examples": [
          {
            "config": {
              "max_tokens": 2000,
              "mode": "normal",
              "temperature": 0.7
            },
            "content": "你好，请介绍一下Python",
            "conversation_id": 1
          },
          {
            "config": {
              "max_tokens": 1500,
              "mode": "professional",
              "temperature": 0.3
            },
            "content": "帮我写一个快速排序算法",
            "conversation_id": 2
          }
        ]
      },
      "ChatResponse": {
        "properties": {
          "message_id": {
            "type": "integer",
            "title": "Message Id",
            "description": "AI回复消息ID"
          },
          "content": {
            "type": "string",
            "title": "Content",
            "description": "AI回复内容"
          },
          "tokens_used": {
            "type": "integer",
            "title": "Tokens Used",
            "description": "消耗的token数量",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "message_id",
          "content"
        ],
        "title": "ChatResponse",
        "description": "聊天响应模型（非流式）"
      },
      "ComponentHealth": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status",
            "description": "状态（healthy/unhealthy/degraded/unknown）"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "状态消息"
          },
          "type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Type",
            "description": "组件类型"
          },
          "version": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Version",
            "description": "版本信息"
          },
          "connected_clients": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Connected Clients",
            "description": "连接客户端数（Redis）"
          },
          "used_memory_human": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Used Memory Human",
            "description": "已用内存（Redis）"
          },
          "persist_directory": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Persist Directory",
            "description": "持久化目录（Chroma）"
          },
          "free_space_gb": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Free Space Gb",
            "description": "可用磁盘空间（GB）"
          }
        },
        "type": "object",
        "required": [
          "status",
          "message"
        ],
        "title": "ComponentHealth",
        "description": "组件健康状态"
      },
      "ConversationCreate": {
        "properties": {
          "title": {
            "type": "string",
            "maxLength": 200,
            "title": "Title",
            "description": "对话标题",
            "default": "新对话"
          }
        },
        "type": "object",
        "title": "ConversationCreate",
        "description": "创建对话请求模型"
      },
      "ConversationDetailResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id",
            "description": "对话ID"
          },
          "title": {
            "type": "string",
            "title": "Title",
            "description": "对话标题"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "创建时间"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "更新时间"
          },
          "messages": {
            "items": {
              "$ref": "#/components/schemas/app__schemas__conversation__MessageResponse"
            },
            "type": "array",
            "title": "Messages",
            "description": "消息列表",
            "default": []
          }
        },
        "type": "object",
        "required": [
          "id",
          "title",
          "created_at",
          "updated_at"
        ],
        "title": "ConversationDetailResponse",
        "description": "对话详情响应模型"
      },
      "ConversationListItem": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id",
            "description": "对话ID"
          },
          "title": {
            "type": "string",
            "title": "Title",
            "description": "对话标题"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "创建时间"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "更新时间"
          },
          "message_count": {
            "type": "integer",
            "title": "Message Count",
            "description": "消息数量",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "id",
          "title",
          "created_at",
          "updated_at"
        ],
        "title": "ConversationListItem",
        "description": "对话列表项模型"
      },
      "ConversationListResponse": {
        "properties": {
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "总数"
          },
          "items": {
            "items": {
              "$ref": "#/components/schemas/ConversationListItem"
            },
            "type": "array",
            "title": "Items",
            "description": "对话列表"
          }
        },
        "type": "object",
        "required": [
          "total",
          "items"
        ],
        "title": "ConversationListResponse",
        "description": "对话列表响应模型"
      },
      "ConversationResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id",
            "description": "对话ID"
          },
          "title": {
            "type": "string",
            "title": "Title",
            "description": "对话标题"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "创建时间"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "更新时间"
          }
        },
        "type": "object",
        "required": [
          "id",
          "title",
          "created_at",
          "updated_at"
        ],
        "title": "ConversationResponse",
        "description": "对话响应模型"
      },
      "ConversationUpdate": {
        "properties": {
          "title": {
            "type": "string",
            "maxLength": 200,
            "title": "Title",
            "description": "对话标题"
          }
        },
        "type": "object",
        "required": [
          "title"
        ],
        "title": "ConversationUpdate",
        "description": "更新对话请求模型"
      },
      "DailyStats": {
        "properties": {
          "date": {
            "type": "string",
            "title": "Date",
            "description": "日期（ISO格式）"
          },
          "call_count": {
            "type": "integer",
            "title": "Call Count",
            "description": "调用次数"
          },
          "total_tokens": {
            "type": "integer",
            "title": "Total Tokens",
            "description": "总token消耗"
          }
        },
        "type": "object",
        "required": [
          "date",
          "call_count",
          "total_tokens"
        ],
        "title": "DailyStats",
        "description": "每日统计"
      },
      "DeleteResponse": {
        "properties": {
          "message": {
            "type": "string",
            "title": "Message",
            "description": "响应消息"
          }
        },
        "type": "object",
        "required": [
          "message"
        ],
        "title": "DeleteResponse",
        "description": "删除响应模型"
      },
      "DocumentChunkResponse": {
        "properties": {
          "content": {
            "type": "string",
            "title": "Content",
            "description": "片段内容"
          },
          "document_name": {
            "type": "string",
            "title": "Document Name",
            "description": "来源文档名称"
          },
          "similarity_score": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Similarity Score",
            "description": "相似度评分"
          },
          "document_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Document Id",
            "description": "文档ID"
          },
          "chunk_index": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chunk Index",
            "description": "分块索引"
          }
        },
        "type": "object",
        "required": [
          "content",
          "document_name",
          "similarity_score"
        ],
        "title": "DocumentChunkResponse",
        "description": "文档片段响应"
      },
      "DocumentListResponse": {
        "properties": {
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "总数"
          },
          "items": {
            "items": {
              "$ref": "#/components/schemas/DocumentResponse"
            },
            "type": "array",
            "title": "Items",
            "description": "文档列表"
          }
        },
        "type": "object",
        "required": [
          "total",
          "items"
        ],
        "title": "DocumentListResponse",
        "description": "文档列表响应"
      },
      "DocumentPreviewResponse": {
        "properties": {
          "document_id": {
            "type": "integer",
            "title": "Document Id",
            "description": "文档ID"
          },
          "filename": {
            "type": "string",
            "title": "Filename",
            "description": "文件名"
          },
          "content": {
            "type": "string",
            "title": "Content",
            "description": "预览内容"
          },
          "total_length": {
            "type": "integer",
            "title": "Total Length",
            "description": "文档总长度"
          }
        },
        "type": "object",
        "required": [
          "document_id",
          "filename",
          "content",
          "total_length"
        ],
        "title": "DocumentPreviewResponse",
        "description": "文档预览响应"
      },
      "DocumentResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id",
            "description": "文档ID"
          },
          "knowledge_base_id": {
            "type": "integer",
            "title": "Knowledge Base Id",
            "description": "知识库ID"
          },
          "filename": {
            "type": "string",
            "title": "Filename",
            "description": "文件名"
          },
          "file_size": {
            "type": "integer",
            "title": "File Size",
            "description": "文件大小（字节）"
          },
          "file_type": {
            "type": "string",
            "title": "File Type",
            "description": "文件类型"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "处理状态"
          },
          "chunk_count": {
            "type": "integer",
            "title": "Chunk Count",
            "description": "分块数量",
            "default": 0
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message",
            "description": "错误信息"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "创建时间"
          }
        },
        "type": "object",
        "required": [
          "id",
          "knowledge_base_id",
          "filename",
          "file_size",
          "file_type",
          "status",
          "created_at"
        ],
        "title": "DocumentResponse",
        "description": "文档响应"
      },
      "DocumentStatusResponse": {
        "properties": {
          "document_id": {
            "type": "integer",
            "title": "Document Id",
            "description": "文档ID"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "处理状态"
          },
          "progress": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Progress",
            "description": "处理进度（0-100）"
          },
          "chunk_count": {
            "type": "integer",
            "title": "Chunk Count",
            "description": "分块数量",
            "default": 0
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message",
            "description": "错误信息"
          }
        },
        "type": "object",
        "required": [
          "document_id",
          "status",
          "progress"
        ],
        "title": "DocumentStatusResponse",
        "description": "文档状态响应"
      },
      "DocumentUploadResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id",
            "description": "文档ID"
          },
          "filename": {
            "type": "string",
            "title": "Filename",
            "description": "文件名"
          },
          "file_size": {
            "type": "integer",
            "title": "File Size",
            "description": "文件大小（字节）"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "处理状态"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "创建时间"
          }
        },
        "type": "object",
        "required": [
          "id",
          "filename",
          "file_size",
          "status",
          "created_at"
        ],
        "title": "DocumentUploadResponse",
        "description": "文档上传响应"
      },
      "ExecutionListItem": {
        "properties": {
          "execution_id": {
            "type": "integer",
            "title": "Execution Id",
            "description": "执行记录ID"
          },
          "task": {
            "type": "string",
            "title": "Task",
            "description": "任务描述"
          },
          "result": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Result",
            "description": "执行结果"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "执行状态"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message",
            "description": "错误信息"
          },
          "step_count": {
            "type": "integer",
            "title": "Step Count",
            "description": "步骤数量"
          },
          "created_at": {
            "type": "string",
            "title": "Created At",
            "description": "创建时间"
          },
          "completed_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completed At",
            "description": "完成时间"
          }
        },
        "type": "object",
        "required": [
          "execution_id",
          "task",
          "status",
          "step_count",
          "created_at"
        ],
        "title": "ExecutionListItem",
        "description": "执行记录列表项模型"
      },
      "ExecutionListResponse": {
        "properties": {
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "执行记录总数"
          },
          "items": {
            "items": {
              "$ref": "#/components/schemas/ExecutionListItem"
            },
            "type": "array",
            "title": "Items",
            "description": "执行记录列表"
          }
        },
        "type": "object",
        "required": [
          "total",
          "items"
        ],
        "title": "ExecutionListResponse",
        "description": "执行记录列表响应模型"
      },
      "ExecutionResponse": {
        "properties": {
          "execution_id": {
            "type": "integer",
            "title": "Execution Id",
            "description": "执行记录ID"
          },
          "task": {
            "type": "string",
            "title": "Task",
            "description": "任务描述"
          },
          "result": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Result",
            "description": "执行结果"
          },
          "steps": {
            "items": {
              "$ref": "#/components/schemas/AgentStep"
            },
            "type": "array",
            "title": "Steps",
            "description": "执行步骤列表"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "执行状态（pending/running/completed/failed）"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message",
            "description": "错误信息"
          },
          "created_at": {
            "type": "string",
            "title": "Created At",
            "description": "创建时间"
          },
          "completed_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completed At",
            "description": "完成时间"
          }
        },
        "type": "object",
        "required": [
          "execution_id",
          "task",
          "status",
          "created_at"
        ],
        "title": "ExecutionResponse",
        "description": "执行记录响应模型"
      },
      "ExportFormatEnum": {
        "type": "string",
        "enum": [
          "markdown",
          "json"
        ],
        "title": "ExportFormatEnum",
        "description": "导出格式枚举"
      },
      "ExportResponse": {
        "properties": {
          "content": {
            "type": "string",
            "title": "Content",
            "description": "导出的内容"
          },
          "format": {
            "type": "string",
            "title": "Format",
            "description": "导出格式"
          },
          "filename": {
            "type": "string",
            "title": "Filename",
            "description": "建议的文件名"
          }
        },
        "type": "object",
        "required": [
          "content",
          "format",
          "filename"
        ],
        "title": "ExportResponse",
        "description": "导出响应模型"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "HealthCheckResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status",
            "description": "整体状态（healthy/unhealthy/degraded）"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "description": "检查时间戳（ISO格式）"
          },
          "components": {
            "additionalProperties": {
              "$ref": "#/components/schemas/ComponentHealth"
            },
            "type": "object",
            "title": "Components",
            "description": "各组件健康状态"
          }
        },
        "type": "object",
        "required": [
          "status",
          "timestamp",
          "components"
        ],
        "title": "HealthCheckResponse",
        "description": "健康检查响应模型\n\n返回系统各组件的健康状态。\n\n需求引用:\n    - 需求8.4: 提供健康检查接口，返回数据库、Redis和向量数据库连接状态",
        "example": {
          "components": {
            "database": {
              "message": "数据库连接正常",
              "status": "healthy",
              "type": "mysql"
            },
            "disk": {
              "free_space_gb": 50,
              "message": "可用磁盘空间: 50GB",
              "status": "healthy"
            },
            "redis": {
              "connected_clients": 5,
              "message": "Redis连接正常",
              "status": "healthy",
              "used_memory_human": "1.5M",
              "version": "7.0.0"
            },
            "vector_db": {
              "message": "向量数据库连接正常",
              "persist_directory": "./data/chroma",
              "status": "healthy",
              "type": "chroma"
            }
          },
          "status": "healthy",
          "timestamp": "2025-01-08T10:00:00Z"
        }
      },
      "KnowledgeBaseCreate": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Name",
            "description": "知识库名称"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "知识库描述"
          },
          "category": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Category",
            "description": "知识库分类"
          }
        },
        "type": "object",
        "required": [
          "name"
        ],
        "title": "KnowledgeBaseCreate",
        "description": "创建知识库请求"
      },
      "KnowledgeBaseListResponse": {
        "properties": {
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "总数"
          },
          "items": {
            "items": {
              "$ref": "#/components/schemas/KnowledgeBaseResponse"
            },
            "type": "array",
            "title": "Items",
            "description": "知识库列表"
          }
        },
        "type": "object",
        "required": [
          "total",
          "items"
        ],
        "title": "KnowledgeBaseListResponse",
        "description": "知识库列表响应"
      },
      "KnowledgeBaseResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id",
            "description": "知识库ID"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "知识库名称"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "知识库描述"
          },
          "category": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Category",
            "description": "知识库分类"
          },
          "document_count": {
            "type": "integer",
            "title": "Document Count",
            "description": "文档数量",
            "default": 0
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "创建时间"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "更新时间"
          }
        },
        "type": "object",
        "required": [
          "id",
          "name",
          "created_at",
          "updated_at"
        ],
        "title": "KnowledgeBaseResponse",
        "description": "知识库响应"
      },
      "KnowledgeBaseUpdate": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "知识库名称"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "知识库描述"
          },
          "category": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Category",
            "description": "知识库分类"
          }
        },
        "type": "object",
        "title": "KnowledgeBaseUpdate",
        "description": "更新知识库请求"
      },
      "MessageResponse": {
        "properties": {
          "message": {
            "type": "string",
            "title": "Message",
            "description": "消息内容"
          }
        },
        "type": "object",
        "required": [
          "message"
        ],
        "title": "MessageResponse",
        "description": "通用消息响应"
      },
      "MessageRoleEnum": {
        "type": "string",
        "enum": [
          "user",
          "assistant",
          "system"
        ],
        "title": "MessageRoleEnum",
        "description": "消息角色枚举"
      },
      "PasswordChangeRequest": {
        "properties": {
          "old_password": {
            "type": "string",
            "title": "Old Password",
            "description": "旧密码",
            "examples": [
              "OldPassword123"
            ]
          },
          "new_password": {
            "type": "string",
            "minLength": 8,
            "title": "New Password",
            "description": "新密码（至少8位，包含字母和数字）",
            "examples": [
              "NewPassword456"
            ]
          }
        },
        "type": "object",
        "required": [
          "old_password",
          "new_password"
        ],
        "title": "PasswordChangeRequest",
        "description": "修改密码请求模型\n\n需求引用:\n    - 需求1.4: 提供正确的旧密码时使用bcrypt加密新密码并更新",
        "examples": [
          {
            "new_password": "NewPassword456",
            "old_password": "OldPassword123"
          }
        ]
      },
      "QuotaResponse": {
        "properties": {
          "monthly_quota": {
            "type": "integer",
            "title": "Monthly Quota",
            "description": "月度配额上限（tokens）"
          },
          "used_quota": {
            "type": "integer",
            "title": "Used Quota",
            "description": "当月已使用配额（tokens）"
          },
          "remaining_quota": {
            "type": "integer",
            "title": "Remaining Quota",
            "description": "剩余配额（tokens）"
          },
          "reset_date": {
            "type": "string",
            "title": "Reset Date",
            "description": "配额重置日期（ISO格式）"
          },
          "usage_percentage": {
            "type": "number",
            "title": "Usage Percentage",
            "description": "使用百分比"
          }
        },
        "type": "object",
        "required": [
          "monthly_quota",
          "used_quota",
          "remaining_quota",
          "reset_date",
          "usage_percentage"
        ],
        "title": "QuotaResponse",
        "description": "配额信息响应模型\n\n返回用户的配额使用情况。\n\n需求引用:\n    - 需求11.7: 返回当月已使用token数、剩余token数和配额重置日期",
        "example": {
          "monthly_quota": 100000,
          "remaining_quota": 75000,
          "reset_date": "2025-02-01",
          "usage_percentage": 25.0,
          "used_quota": 25000
        }
      },
      "QuotaUpdateRequest": {
        "properties": {
          "user_id": {
            "type": "integer",
            "exclusiveMinimum": 0.0,
            "title": "User Id",
            "description": "用户ID"
          },
          "monthly_quota": {
            "type": "integer",
            "minimum": 1000.0,
            "title": "Monthly Quota",
            "description": "新的月度配额上限（最小1000 tokens）"
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "monthly_quota"
        ],
        "title": "QuotaUpdateRequest",
        "description": "配额更新请求模型（管理员）\n\n用于管理员更新用户的月度配额。\n\n需求引用:\n    - 需求11.5: 管理员更新用户配额",
        "example": {
          "monthly_quota": 200000,
          "user_id": 1
        }
      },
      "QuotaUpdateResponse": {
        "properties": {
          "user_id": {
            "type": "integer",
            "title": "User Id",
            "description": "用户ID"
          },
          "monthly_quota": {
            "type": "integer",
            "title": "Monthly Quota",
            "description": "更新后的月度配额上限"
          },
          "used_quota": {
            "type": "integer",
            "title": "Used Quota",
            "description": "当前已使用配额"
          },
          "remaining_quota": {
            "type": "integer",
            "title": "Remaining Quota",
            "description": "剩余配额"
          },
          "reset_date": {
            "type": "string",
            "title": "Reset Date",
            "description": "配额重置日期"
          },
          "updated_at": {
            "type": "string",
            "title": "Updated At",
            "description": "更新时间"
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "monthly_quota",
          "used_quota",
          "remaining_quota",
          "reset_date",
          "updated_at"
        ],
        "title": "QuotaUpdateResponse",
        "description": "配额更新响应模型\n\n返回更新后的配额信息。",
        "example": {
          "monthly_quota": 200000,
          "remaining_quota": 175000,
          "reset_date": "2025-02-01",
          "updated_at": "2025-01-08T10:00:00Z",
          "used_quota": 25000,
          "user_id": 1
        }
      },
      "RAGQueryRequest": {
        "properties": {
          "knowledge_base_ids": {
            "items": {
              "type": "integer"
            },
            "type": "array",
            "minItems": 1,
            "title": "Knowledge Base Ids",
            "description": "知识库ID列表"
          },
          "question": {
            "type": "string",
            "maxLength": 2000,
            "minLength": 1,
            "title": "Question",
            "description": "查询问题"
          },
          "top_k": {
            "type": "integer",
            "maximum": 20.0,
            "minimum": 1.0,
            "title": "Top K",
            "description": "检索文档数量",
            "default": 5
          },
          "conversation_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Conversation Id",
            "description": "对话ID（用于维护上下文）"
          }
        },
        "type": "object",
        "required": [
          "knowledge_base_ids",
          "question"
        ],
        "title": "RAGQueryRequest",
        "description": "RAG查询请求"
      },
      "RAGQueryResponse": {
        "properties": {
          "answer": {
            "type": "string",
            "title": "Answer",
            "description": "生成的答案"
          },
          "sources": {
            "items": {
              "$ref": "#/components/schemas/DocumentChunkResponse"
            },
            "type": "array",
            "title": "Sources",
            "description": "参考文档片段"
          },
          "tokens_used": {
            "type": "integer",
            "title": "Tokens Used",
            "description": "消耗的token数量"
          }
        },
        "type": "object",
        "required": [
          "answer",
          "sources",
          "tokens_used"
        ],
        "title": "RAGQueryResponse",
        "description": "RAG查询响应"
      },
      "RefreshTokenRequest": {
        "properties": {
          "refresh_token": {
            "type": "string",
            "title": "Refresh Token",
            "description": "刷新令牌"
          }
        },
        "type": "object",
        "required": [
          "refresh_token"
        ],
        "title": "RefreshTokenRequest",
        "description": "刷新令牌请求模型"
      },
      "SystemConfigResponse": {
        "properties": {
          "app": {
            "additionalProperties": true,
            "type": "object",
            "title": "App",
            "description": "应用配置"
          },
          "database": {
            "additionalProperties": true,
            "type": "object",
            "title": "Database",
            "description": "数据库配置"
          },
          "redis": {
            "additionalProperties": true,
            "type": "object",
            "title": "Redis",
            "description": "Redis配置"
          },
          "tongyi": {
            "additionalProperties": true,
            "type": "object",
            "title": "Tongyi",
            "description": "通义千问配置"
          },
          "vector_db": {
            "additionalProperties": true,
            "type": "object",
            "title": "Vector Db",
            "description": "向量数据库配置"
          },
          "file_storage": {
            "additionalProperties": true,
            "type": "object",
            "title": "File Storage",
            "description": "文件存储配置"
          },
          "document_processing": {
            "additionalProperties": true,
            "type": "object",
            "title": "Document Processing",
            "description": "文档处理配置"
          },
          "rag": {
            "additionalProperties": true,
            "type": "object",
            "title": "Rag",
            "description": "RAG配置"
          },
          "quota": {
            "additionalProperties": true,
            "type": "object",
            "title": "Quota",
            "description": "配额配置"
          },
          "rate_limit": {
            "additionalProperties": true,
            "type": "object",
            "title": "Rate Limit",
            "description": "速率限制配置"
          },
          "security": {
            "additionalProperties": true,
            "type": "object",
            "title": "Security",
            "description": "安全配置"
          },
          "jwt": {
            "additionalProperties": true,
            "type": "object",
            "title": "Jwt",
            "description": "JWT配置"
          }
        },
        "type": "object",
        "required": [
          "app",
          "database",
          "redis",
          "tongyi",
          "vector_db",
          "file_storage",
          "document_processing",
          "rag",
          "quota",
          "rate_limit",
          "security",
          "jwt"
        ],
        "title": "SystemConfigResponse",
        "description": "系统配置响应模型\n\n返回系统配置信息，敏感字段已脱敏。\n\n需求引用:\n    - 需求7.5: 查询系统配置时对敏感字段进行脱敏处理",
        "example": {
          "app": {
            "debug": false,
            "environment": "development",
            "name": "AI智能助手系统",
            "version": "0.1.0"
          },
          "tongyi": {
            "api_key": "sk-a****",
            "max_tokens": 2000,
            "model_name": "qwen-turbo",
            "temperature": 0.7
          }
        }
      },
      "SystemConfigUpdateRequest": {
        "properties": {
          "tongyi": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tongyi",
            "description": "通义千问配置更新"
          },
          "rag": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rag",
            "description": "RAG配置更新"
          },
          "quota": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Quota",
            "description": "配额配置更新"
          }
        },
        "type": "object",
        "title": "SystemConfigUpdateRequest",
        "description": "系统配置更新请求模型（管理员）\n\n用于管理员更新系统配置。\n\n需求引用:\n    - 需求7.1: 配置通义千问API密钥\n    - 需求7.2: 更新模型参数",
        "example": {
          "rag": {
            "similarity_threshold": 0.75,
            "top_k": 10
          },
          "tongyi": {
            "max_tokens": 3000,
            "temperature": 0.8
          }
        }
      },
      "SystemInfoResponse": {
        "properties": {
          "system": {
            "$ref": "#/components/schemas/SystemInfoSystem"
          },
          "statistics": {
            "$ref": "#/components/schemas/SystemInfoStatistics",
            "description": "统计信息"
          },
          "uptime": {
            "$ref": "#/components/schemas/SystemInfoUptime",
            "description": "运行时间"
          }
        },
        "type": "object",
        "required": [
          "system",
          "statistics",
          "uptime"
        ],
        "title": "SystemInfoResponse",
        "description": "系统信息响应模型\n\n返回系统的基本信息和运行状态。",
        "example": {
          "statistics": {
            "active_users": 80,
            "today_api_calls": 500,
            "today_tokens_used": 250000,
            "total_users": 100
          },
          "system": {
            "app_name": "AI智能助手系统",
            "app_version": "0.1.0",
            "environment": "production",
            "platform": "Linux",
            "platform_version": "5.10.0",
            "python_version": "3.11.0"
          },
          "uptime": {
            "started_at": "2025-01-08T00:00:00Z"
          }
        }
      },
      "SystemInfoStatistics": {
        "properties": {
          "total_users": {
            "type": "integer",
            "title": "Total Users",
            "description": "总用户数"
          },
          "active_users": {
            "type": "integer",
            "title": "Active Users",
            "description": "活跃用户数"
          },
          "today_api_calls": {
            "type": "integer",
            "title": "Today Api Calls",
            "description": "今日API调用次数"
          },
          "today_tokens_used": {
            "type": "integer",
            "title": "Today Tokens Used",
            "description": "今日token消耗"
          }
        },
        "type": "object",
        "required": [
          "total_users",
          "active_users",
          "today_api_calls",
          "today_tokens_used"
        ],
        "title": "SystemInfoStatistics",
        "description": "系统统计信息"
      },
      "SystemInfoSystem": {
        "properties": {
          "platform": {
            "type": "string",
            "title": "Platform",
            "description": "操作系统平台"
          },
          "platform_version": {
            "type": "string",
            "title": "Platform Version",
            "description": "平台版本"
          },
          "python_version": {
            "type": "string",
            "title": "Python Version",
            "description": "Python版本"
          },
          "app_name": {
            "type": "string",
            "title": "App Name",
            "description": "应用名称"
          },
          "app_version": {
            "type": "string",
            "title": "App Version",
            "description": "应用版本"
          },
          "environment": {
            "type": "string",
            "title": "Environment",
            "description": "运行环境"
          }
        },
        "type": "object",
        "required": [
          "platform",
          "platform_version",
          "python_version",
          "app_name",
          "app_version",
          "environment"
        ],
        "title": "SystemInfoSystem",
        "description": "系统基本信息"
      },
      "SystemInfoUptime": {
        "properties": {
          "started_at": {
            "type": "string",
            "title": "Started At",
            "description": "启动时间（ISO格式）"
          }
        },
        "type": "object",
        "required": [
          "started_at"
        ],
        "title": "SystemInfoUptime",
        "description": "系统运行时间"
      },
      "TaskExecuteRequest": {
        "properties": {
          "task": {
            "type": "string",
            "maxLength": 2000,
            "minLength": 1,
            "title": "Task",
            "description": "任务描述"
          },
          "tool_ids": {
            "anyOf": [
              {
                "items": {
                  "type": "integer"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tool Ids",
            "description": "要使用的工具ID列表（可选，默认使用所有启用的工具）"
          },
          "max_iterations": {
            "type": "integer",
            "maximum": 50.0,
            "minimum": 1.0,
            "title": "Max Iterations",
            "description": "最大迭代次数",
            "default": 10
          }
        },
        "type": "object",
        "required": [
          "task"
        ],
        "title": "TaskExecuteRequest",
        "description": "执行任务请求模型"
      },
      "TitleGenerateRequest": {
        "properties": {
          "message": {
            "type": "string",
            "maxLength": 10000,
            "minLength": 1,
            "title": "Message",
            "description": "用于生成标题的消息内容"
          }
        },
        "type": "object",
        "required": [
          "message"
        ],
        "title": "TitleGenerateRequest",
        "description": "标题生成请求模型"
      },
      "TitleGenerateResponse": {
        "properties": {
          "title": {
            "type": "string",
            "title": "Title",
            "description": "生成的标题"
          }
        },
        "type": "object",
        "required": [
          "title"
        ],
        "title": "TitleGenerateResponse",
        "description": "标题生成响应模型"
      },
      "TokenResponse": {
        "properties": {
          "access_token": {
            "type": "string",
            "title": "Access Token",
            "description": "访问令牌",
            "examples": [
              "eyJ0eXAiOiJKV1QiLCJhbGc..."
            ]
          },
          "refresh_token": {
            "type": "string",
            "title": "Refresh Token",
            "description": "刷新令牌",
            "examples": [
              "eyJ0eXAiOiJKV1QiLCJhbGc..."
            ]
          },
          "token_type": {
            "type": "string",
            "title": "Token Type",
            "description": "令牌类型",
            "default": "bearer",
            "examples": [
              "bearer"
            ]
          },
          "expires_in": {
            "type": "integer",
            "title": "Expires In",
            "description": "访问令牌有效期（秒）",
            "examples": [
              604800
            ]
          }
        },
        "type": "object",
        "required": [
          "access_token",
          "refresh_token",
          "expires_in"
        ],
        "title": "TokenResponse",
        "description": "令牌响应模型\n\n需求引用:\n    - 需求1.2: 访问令牌有效期为7天，刷新令牌有效期为30天",
        "examples": [
          {
            "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
            "expires_in": 604800,
            "refresh_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
            "token_type": "bearer"
          }
        ]
      },
      "ToolCreate": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Name",
            "description": "工具名称"
          },
          "description": {
            "type": "string",
            "maxLength": 500,
            "minLength": 1,
            "title": "Description",
            "description": "工具描述"
          },
          "config": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Config",
            "description": "工具配置参数"
          }
        },
        "type": "object",
        "required": [
          "name",
          "description"
        ],
        "title": "ToolCreate",
        "description": "创建工具请求模型"
      },
      "ToolListResponse": {
        "properties": {
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "工具总数"
          },
          "items": {
            "items": {
              "$ref": "#/components/schemas/ToolResponse"
            },
            "type": "array",
            "title": "Items",
            "description": "工具列表"
          }
        },
        "type": "object",
        "required": [
          "total",
          "items"
        ],
        "title": "ToolListResponse",
        "description": "工具列表响应模型"
      },
      "ToolResponse": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Name",
            "description": "工具名称"
          },
          "description": {
            "type": "string",
            "maxLength": 500,
            "minLength": 1,
            "title": "Description",
            "description": "工具描述"
          },
          "id": {
            "type": "integer",
            "title": "Id",
            "description": "工具ID"
          },
          "tool_type": {
            "type": "string",
            "title": "Tool Type",
            "description": "工具类型（builtin/custom）"
          },
          "config": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Config",
            "description": "工具配置参数"
          },
          "is_enabled": {
            "type": "boolean",
            "title": "Is Enabled",
            "description": "是否启用"
          },
          "created_at": {
            "type": "string",
            "title": "Created At",
            "description": "创建时间"
          }
        },
        "type": "object",
        "required": [
          "name",
          "description",
          "id",
          "tool_type",
          "is_enabled",
          "created_at"
        ],
        "title": "ToolResponse",
        "description": "工具响应模型"
      },
      "ToolUpdate": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "工具名称"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "工具描述"
          },
          "config": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Config",
            "description": "工具配置参数"
          },
          "is_enabled": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Enabled",
            "description": "是否启用"
          }
        },
        "type": "object",
        "title": "ToolUpdate",
        "description": "更新工具请求模型"
      },
      "UsageStatsPeriod": {
        "properties": {
          "start_date": {
            "type": "string",
            "title": "Start Date",
            "description": "开始日期（ISO格式）"
          },
          "end_date": {
            "type": "string",
            "title": "End Date",
            "description": "结束日期（ISO格式）"
          }
        },
        "type": "object",
        "required": [
          "start_date",
          "end_date"
        ],
        "title": "UsageStatsPeriod",
        "description": "统计周期"
      },
      "UsageStatsResponse": {
        "properties": {
          "period": {
            "$ref": "#/components/schemas/UsageStatsPeriod"
          },
          "summary": {
            "$ref": "#/components/schemas/UsageStatsSummary",
            "description": "统计摘要"
          },
          "api_type_breakdown": {
            "items": {
              "$ref": "#/components/schemas/APITypeStats"
            },
            "type": "array",
            "title": "Api Type Breakdown",
            "description": "按API类型分类统计"
          },
          "daily_breakdown": {
            "items": {
              "$ref": "#/components/schemas/DailyStats"
            },
            "type": "array",
            "title": "Daily Breakdown",
            "description": "每日统计"
          },
          "user_quota": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/UserQuotaInfo"
              },
              {
                "type": "null"
              }
            ],
            "description": "用户配额信息（仅用户统计时返回）"
          }
        },
        "type": "object",
        "required": [
          "period",
          "summary",
          "api_type_breakdown",
          "daily_breakdown"
        ],
        "title": "UsageStatsResponse",
        "description": "使用统计响应模型\n\n返回系统或用户的使用统计信息。\n\n需求引用:\n    - 需求8.2: 返回总token消耗、API调用次数、活跃用户数和功能使用热度\n    - 需求8.3: 按用户维度统计token消耗并支持按时间范围筛选",
        "example": {
          "api_type_breakdown": [
            {
              "api_type": "chat",
              "call_count": 600,
              "total_tokens": 300000
            },
            {
              "api_type": "rag",
              "call_count": 300,
              "total_tokens": 150000
            }
          ],
          "daily_breakdown": [
            {
              "call_count": 50,
              "date": "2025-01-01",
              "total_tokens": 25000
            }
          ],
          "period": {
            "end_date": "2025-01-31",
            "start_date": "2025-01-01"
          },
          "summary": {
            "active_users": 50,
            "average_tokens_per_call": 500,
            "total_calls": 1000,
            "total_cost": 50.0,
            "total_tokens": 500000
          }
        }
      },
      "UsageStatsSummary": {
        "properties": {
          "total_tokens": {
            "type": "integer",
            "title": "Total Tokens",
            "description": "总token消耗"
          },
          "total_calls": {
            "type": "integer",
            "title": "Total Calls",
            "description": "总API调用次数"
          },
          "total_cost": {
            "type": "number",
            "title": "Total Cost",
            "description": "总费用"
          },
          "active_users": {
            "type": "integer",
            "title": "Active Users",
            "description": "活跃用户数"
          },
          "average_tokens_per_call": {
            "type": "integer",
            "title": "Average Tokens Per Call",
            "description": "平均每次调用token数"
          }
        },
        "type": "object",
        "required": [
          "total_tokens",
          "total_calls",
          "total_cost",
          "active_users",
          "average_tokens_per_call"
        ],
        "title": "UsageStatsSummary",
        "description": "使用统计摘要"
      },
      "UserLogin": {
        "properties": {
          "username": {
            "type": "string",
            "title": "Username",
            "description": "用户名",
            "examples": [
              "testuser"
            ]
          },
          "password": {
            "type": "string",
            "title": "Password",
            "description": "密码",
            "examples": [
              "Password123"
            ]
          }
        },
        "type": "object",
        "required": [
          "username",
          "password"
        ],
        "title": "UserLogin",
        "description": "用户登录请求模型",
        "examples": [
          {
            "password": "Password123",
            "username": "testuser"
          }
        ]
      },
      "UserQuotaInfo": {
        "properties": {
          "monthly_quota": {
            "type": "integer",
            "title": "Monthly Quota",
            "description": "月度配额"
          },
          "used_quota": {
            "type": "integer",
            "title": "Used Quota",
            "description": "已使用配额"
          },
          "remaining_quota": {
            "type": "integer",
            "title": "Remaining Quota",
            "description": "剩余配额"
          },
          "usage_percentage": {
            "type": "number",
            "title": "Usage Percentage",
            "description": "使用百分比"
          },
          "reset_date": {
            "type": "string",
            "title": "Reset Date",
            "description": "重置日期"
          }
        },
        "type": "object",
        "required": [
          "monthly_quota",
          "used_quota",
          "remaining_quota",
          "usage_percentage",
          "reset_date"
        ],
        "title": "UserQuotaInfo",
        "description": "用户配额信息"
      },
      "UserRegister": {
        "properties": {
          "username": {
            "type": "string",
            "maxLength": 50,
            "minLength": 3,
            "title": "Username",
            "description": "用户名（3-50个字符）",
            "examples": [
              "testuser",
              "john_doe",
              "alice2024"
            ]
          },
          "password": {
            "type": "string",
            "minLength": 8,
            "title": "Password",
            "description": "密码（至少8位，包含字母和数字）",
            "examples": [
              "Password123",
              "SecurePass456"
            ]
          },
          "email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email",
            "description": "邮箱地址（可选）",
            "examples": [
              "user@example.com",
              "john.doe@company.com"
            ]
          }
        },
        "type": "object",
        "required": [
          "username",
          "password"
        ],
        "title": "UserRegister",
        "description": "用户注册请求模型\n\n需求引用:\n    - 需求1.1: 用户名唯一且密码强度符合要求（至少8位，包含字母和数字）",
        "examples": [
          {
            "email": "test@example.com",
            "password": "Password123",
            "username": "testuser"
          },
          {
            "password": "SecurePass456",
            "username": "john_doe"
          }
        ]
      },
      "UserResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id",
            "description": "用户ID"
          },
          "username": {
            "type": "string",
            "title": "Username",
            "description": "用户名"
          },
          "email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email",
            "description": "邮箱地址"
          },
          "avatar": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avatar",
            "description": "头像URL"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "创建时间"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "description": "是否激活"
          }
        },
        "type": "object",
        "required": [
          "id",
          "username",
          "created_at",
          "is_active"
        ],
        "title": "UserResponse",
        "description": "用户信息响应模型"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "app__schemas__agent__DeleteResponse": {
        "properties": {
          "message": {
            "type": "string",
            "title": "Message",
            "description": "删除成功消息"
          }
        },
        "type": "object",
        "required": [
          "message"
        ],
        "title": "DeleteResponse",
        "description": "删除响应模型"
      },
      "app__schemas__auth__MessageResponse": {
        "properties": {
          "message": {
            "type": "string",
            "title": "Message",
            "description": "响应消息"
          }
        },
        "type": "object",
        "required": [
          "message"
        ],
        "title": "MessageResponse",
        "description": "通用消息响应模型"
      },
      "app__schemas__conversation__MessageResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id",
            "description": "消息ID"
          },
          "conversation_id": {
            "type": "integer",
            "title": "Conversation Id",
            "description": "对话ID"
          },
          "role": {
            "$ref": "#/components/schemas/MessageRoleEnum",
            "description": "消息角色"
          },
          "content": {
            "type": "string",
            "title": "Content",
            "description": "消息内容"
          },
          "tokens": {
            "type": "integer",
            "title": "Tokens",
            "description": "消耗的token数量",
            "default": 0
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "创建时间"
          }
        },
        "type": "object",
        "required": [
          "id",
          "conversation_id",
          "role",
          "content",
          "created_at"
        ],
        "title": "MessageResponse",
        "description": "消息响应模型"
      }
    },
    "securitySchemes": {
      "HTTPBearer": {
        "type": "http",
        "scheme": "bearer"
      }
    }
  },
  "tags": [
    {
      "name": "认证",
      "description": "用户注册、登录、令牌管理等认证相关操作"
    },
    {
      "name": "对话",
      "description": "对话会话管理、消息历史、对话导出等功能"
    },
    {
      "name": "聊天",
      "description": "实时聊天、流式响应、AI对话交互"
    },
    {
      "name": "配额",
      "description": "用户配额查询和管理"
    },
    {
      "name": "知识库",
      "description": "知识库创建、管理、文档上传等操作"
    },
    {
      "name": "文档",
      "description": "文档上传、处理状态查询、预览和删除"
    },
    {
      "name": "RAG",
      "description": "基于知识库的检索增强生成问答"
    },
    {
      "name": "Agent",
      "description": "智能代理工具管理和任务执行"
    },
    {
      "name": "系统",
      "description": "系统配置、使用统计、健康检查等管理功能"
    }
  ]
}